(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78706:function(e,n,t){"use strict";t.r(n),t.d(n,{Graph:function(){return rt},GraphPage:function(){return tt},default:function(){return nt},getThemeColor:function(){return lt},hexToRGBA:function(){return st},normalizeLinkEnds:function(){return ot}});var r=t(15861),i=t(42982),o=t(4942),l=t(70885),s=t(87757),c=t.n(s),a=t(67294),u=t(9008);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=f(e,null!==(t=r.storage)&&void 0!==t?t:localStorage),o=i.get(),l=void 0!==o?o:n,s=null!=o&&"object"===typeof o&&!1===Array.isArray(o)?h(h({},n),o):l;s!==o&&i.update(s);var c=(0,a.useState)(s),u=c[0],d=c[1];(0,a.useEffect)((function(){u!==s&&d(s)}),[e]);var g=function(e){e instanceof Function?d((function(n){var t=e(n);return i.update(t),t})):(d(e),i.update(e))};return[u,g]}function f(e,n){return{get:function(){var t=n.getItem(e);if(t&&"undefined"!==t)return JSON.parse(t)},update:function(t){n.setItem(e,JSON.stringify(t))},remove:function(){n.removeItem(e)}}}var p=t(52596),x=t(45987),j=t(94096),b=t(48420),v=t(47516),m=t(35255),y=t(56884),C=t(85893),k=function(e){var n=e.setJustification,t=e.setIndent,r=e.setFont,i=e.justification;return(0,C.jsxs)(j.k,{py:3,alignItems:"center",justifyContent:"space-between",pr:4,children:[(0,C.jsxs)(j.k,{children:[(0,C.jsx)(b.h,{variant:"ghost",icon:(0,C.jsx)(m.w,{}),"aria-label":"Previous node"}),(0,C.jsx)(b.h,{variant:"ghost",icon:(0,C.jsx)(y.X,{}),"aria-label":"Previous node"})]}),(0,C.jsxs)(j.k,{children:[(0,C.jsx)(b.h,{variant:"ghost","aria-label":"Justify content",icon:[(0,C.jsx)(v.v9V,{},"justify"),(0,C.jsx)(v.YSr,{},"left"),(0,C.jsx)(v.RXA,{},"right"),(0,C.jsx)(v.tr_,{},"center")][i],onClick:function(){return n((function(e){return(e+1)%4}))}}),(0,C.jsx)(b.h,{variant:"ghost","aria-label":"Indent Text",icon:(0,C.jsx)(v.WHD,{}),onClick:function(){t((function(e){return e?0:1}))}}),(0,C.jsx)(b.h,{variant:"ghost","aria-label":"Change font",icon:(0,C.jsx)(v.TlM,{}),onClick:function(){r((function(e){return"sans serif"===e?"serif":"sans serif"}))}})]})]})},w=t(48017),O=t(18835),S=t.n(O),P=t(13816),N=t.n(P),I=t(42728),L=t.n(I),D=t(77890),z=t.n(D),E=t(94986),R=t.n(E),T=t(88541),Z=t.n(T),B=t(71167),F=t.n(B),H=(t(85062),t(27431)),A=t.n(H),V=t(40980),M=t(64115),W=t(45170),X=t(67273),_=t(29356),U={".katex":{overflowX:"scroll"},h1:{color:"black",lineHeight:"1.2",fontSize:"20",fontWeight:"bold",marginBottom:3},h2:{fontSize:"18",marginBottom:2,color:"black"},h3:{fontSize:"16",fontWeight:"600 !important",marginBottom:".5em",color:"black"},h4:{fontSize:"14",fontWeight:"500 !important",marginBottom:".25em",fontStyle:"italic",color:"black"},ol:{paddingLeft:"5"},ul:{paddingLeft:"5"},p:{fontSize:"14",fontWeight:"500 !important",paddingBottom:".5em"},div:{hyphens:"auto !important"},".title":{textAlign:"center",marginBottom:".2em"},".subtitle":{textAlign:"center",fontSize:"medium",fontWeight:"bold",marginTop:0},".todo":{fontFamily:"monospace",color:"red"},".equationContainer":{display:"table",textAlign:"center",width:"100%"},".equation":{verticalAlign:"middle"},".equation-label":{display:"tableCell",textAlign:"right",verticalAlign:"middle"},".inlinetask":{padding:"10px",border:"2px solid gray",margin:"10px",background:"#ffffcc"},"#org-div-home-and-up":{textAlign:"right",fontSize:"70 % ",whiteSpace:"nowrap"},textarea:{overflowX:"auto"},".linenr":{fontSize:"smaller"},".code-highlighted":{backgroundColor:"#ffff00"},".org-info-js_info-navigation":{borderStyle:"none"},"#org-info-js_console-label":{fontSize:"10px",fontWeight:"bold",whiteSpace:"nowrap"},".org-info-js_search-highlight":{backgroundColor:"#ffff00",color:"#000000",fontWeight:"bold"},".org-svg":{width:"90%"},".done":{fontFamily:"monospace",color:"green"},".priority":{fontFamily:"monospace",color:"orange"},".tag":{backgroundColor:"#eee",fontFamily:"monospace",padding:"2px",fontSize:"80%",fontWeight:"normal"},".timestamp":{color:"#bebebe"},".timestamp-kwd":{color:"#5f9ea0"},".org-right":{marginLeft:"auto",marginRight:"0px",textAlign:"right"},".org-left":{marginLeft:"0px",marginRight:"auto",textAlign:"left"},".org-center":{marginLeft:"auto",marginRight:"auto",textAlign:"center"},".underline":{textDecoration:"underline"},"#postamble p":{fontSize:"90%",margin:".2em"},"#preamble p":{fontSize:"90%",margin:".2em"},"p.verse":{marginLeft:"3%"},pre:{border:"1px solid #e6e6e6",borderRadius:"3px",backgroundColor:"#f2f2f2",padding:"8pt",fontFamily:"monospace",overflow:"auto",margin:"1.2em"},"pre.src":{position:"relative",overflow:"auto"},"pre.src:before":{display:"none",position:"absolute",top:"-8px",right:"12px",padding:"3px",color:"#555",backgroundColor:"#f2f2f299"},"caption.t-above":{captionSide:"top"},"caption.t-bottom":{captionSide:"bottom"},"th.org-right":{textAlign:"center"},"th.org-left":{textAlign:"center"},"th.org-center":{textAlign:"center"},"td.org-right":{textAlign:"right"},"td.org-left":{textAlign:"left"},"td.org-center":{textAlign:"center"},".footpara":{display:"inline"},".footdef":{marginBottom:"1em"},".figure":{padding:"1em"},".figure p":{textAlign:"center"}},q=U,Q=t(25675),G=t(62520),J=t.n(G),K=function(e){var n=e.src,t=e.file,r=(0,a.useState)(null),i=(r[0],r[1],J().dirname(t)),o=encodeURIComponent(encodeURIComponent(J().join(i,n)));return(0,C.jsx)(Q.default,{layout:"responsive",loader:function(e){var n=e.src;e.width,e.quality;return"http://localhost:35901/img/".concat(n)},src:o,alt:"",width:"70%",height:"70%"})},Y=function(e){var n,t=e.setSidebarHighlightedNode,r=e.setPreviewNode,o=e.nodeById,s=e.href,c=(e.children,(0,a.useContext)(_.N).highlightColor),u=lt(c,(0,V.useTheme)()),d=(0,l.Z)((0,i.Z)(s.matchAll(/(.*?)\:(.*)/g))[0],3),h=(d[0],d[1],d[2]);return(0,C.jsx)(M.x,{onMouseEnter:function(){return t(o[h])},onMouseLeave:function(){return t({})},tabIndex:0,display:"inline",overflow:"hidden",fontWeight:500,color:c,textDecoration:"underline",onClick:function(){return r(o[h])},_hover:{textDecoration:"none",cursor:"pointer",bgColor:u+"22"},_focus:{outlineColor:c},children:null===(n=o[h])||void 0===n?void 0:n.title})},$=function e(n){var t,r,o,s,c,u=n.href,d=n.children,h=n.nodeById,g=n.setSidebarHighlightedNode,f=(n.previewNode,n.setPreviewNode),p=n.nodeByCite,x=(0,a.useState)(null),j=x[0],b=x[1],v=(0,l.Z)((0,i.Z)(u.matchAll(/(.*?)\:(.*)/g))[0],3),m=(v[0],v[1]),y=v[2],k=(0,a.useState)(!1),O=k[0],P=k[1],I=function(e,n){if("id"===e)return n;if(e.includes("cite")){var t,r=null!==(t=p[n])&&void 0!==t&&t;return r?null!==r&&void 0!==r&&r.properties.FILELESS?"":null===r||void 0===r?void 0:r.id:""}return""}(m,y),D=encodeURIComponent(encodeURIComponent(null===(t=h[I])||void 0===t?void 0:t.file)),z=S()().use(N()).use(L()).use(F()).use(A(),{createElement:a.createElement,components:{a:function(n){n.children;var t,r=n.href;return(0,C.jsx)(e,{nodeByCite:p,setSidebarHighlightedNode:g,href:r,nodeById:h,setPreviewNode:f,children:null===(t=h[I])||void 0===t?void 0:t.title})},img:function(e){var n,t=e.src;return(0,C.jsx)(K,{src:t,file:null===(n=h[I])||void 0===n?void 0:n.file})}}});return(0,a.useEffect)((function(){j||O&&fetch("http://localhost:35901/file/".concat(D)).then((function(e){return e.text()})).then((function(e){if("error"===e);else{var n=z.processSync(e).result;b(n)}})).catch((function(e){return console.log(e),"Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it."}))}),[O,j]),I?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(W.J2,{gutter:12,trigger:"hover",placement:"top-start",children:[(0,C.jsx)(W.xo,{children:(0,C.jsx)(w.xu,{display:"inline",onMouseEnter:function(){return P(!0)},onMouseLeave:function(){return P(!1)},children:(0,C.jsx)(Y,{setSidebarHighlightedNode:g,setPreviewNode:f,nodeById:h,href:u,children:d,nodeByCite:p},null!==(r=null===(o=h[I])||void 0===o?void 0:o.title)&&void 0!==r?r:I)})}),(0,C.jsx)(X.h,{children:(0,C.jsxs)(W.yk,{boxShadow:"xl",position:"relative",zIndex:"tooltip",onMouseEnter:function(){var e;g(null!==(e=h[I])&&void 0!==e?e:{})},onMouseLeave:function(){g({})},children:[(0,C.jsx)(W.QH,{}),(0,C.jsx)(W.b,{pb:5,fontSize:"xs",px:5,position:"relative",zIndex:"tooltip",maxHeight:300,overflow:"scroll",children:(0,C.jsx)(w.xu,{sx:q,children:j})})]},null!==(s=null===(c=h[I])||void 0===c?void 0:c.title)&&void 0!==s?s:I)})]})}):(0,C.jsx)(M.x,{display:"inline",color:"base.700",cursor:"not-allowed",children:d})},ee=function(e){var n=e.nodeById,t=e.setSidebarHighlightedNode,r=e.setPreviewNode,i=e.previewText,o=e.nodeByCite,l=e.previewNode,s=S()().use(N()).use(R()).use(Z()).use(z()).use(L()).use(F()).use(A(),{createElement:a.createElement,components:{a:function(e){var i=e.children,l=e.href;return(0,C.jsx)($,{nodeByCite:o,setSidebarHighlightedNode:t,href:"".concat(l),nodeById:n,setPreviewNode:r,children:i})},img:function(e){var n=e.src;return(0,C.jsx)(K,{src:n,file:l.file})}}}),c=(0,a.useMemo)((function(){return s.processSync(i).result}),[i]);return(0,C.jsx)(C.Fragment,{children:c})},ne=function(e){var n=e.setSidebarHighlightedNode,t=e.nodeById,r=e.nodeByCite,i=e.previewNode,o=e.setPreviewNode,l=(0,a.useState)(""),s=l[0],c=l[1],u=encodeURIComponent(encodeURIComponent(i.file));return(0,a.useEffect)((function(){fetch("http://localhost:35901/file/".concat(u)).then((function(e){return e.text()})).then((function(e){"error"!==e&&c(e)})).catch((function(e){return console.log(e),"Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it."}))}),[i.id]),(0,C.jsx)(C.Fragment,{children:(null===i||void 0===i?void 0:i.id)&&(0,C.jsx)(ee,{nodeById:t,previewNode:i,setPreviewNode:o,previewText:s,nodeByCite:r,setSidebarHighlightedNode:n})})},te=t(336),re=t(72026),ie=function(e){var n,t=e.previewNode,r=e.setPreviewNode,i=e.setSidebarHighlightedNode,o=e.nodeById,s=e.linksByNodeId,c=e.nodeByCite,a=(null!==(n=s[null===t||void 0===t?void 0:t.id])&&void 0!==n?n:[]).filter((function(e){var n=ot(e),r=(0,l.Z)(n,2),i=r[0];r[1];return i!==(null===t||void 0===t?void 0:t.id)})).map((function(e){return e.source}));return(0,C.jsxs)(w.xu,{children:[(0,C.jsx)(te.X,{pt:4,children:"Backlinks (".concat(a.length,")")}),(0,C.jsx)(re.gC,{pt:2,spacing:3,alignItems:"start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(null===t||void 0===t?void 0:t.id)&&a.map((function(e){var n,t,l;n=null===(t=o[e])||void 0===t?void 0:t.title;return(0,C.jsx)(w.xu,{overflow:"hidden",p:3,bg:"gray.300",width:"100%",children:(0,C.jsx)($,{nodeByCite:c,setSidebarHighlightedNode:i,href:"id:".concat(e),nodeById:o,setPreviewNode:r,children:null===(l=o[e])||void 0===l?void 0:l.title})},e)}))})]})};function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var se=function(e){var n=e.setPreviewNode,t=e.justificationList,r=e.justification,i=e.previewNode,o=e.nodeById,l=e.nodeByCite,s=e.setSidebarHighlightedNode,c=e.linksByNodeId;return(0,C.jsx)(w.xu,{pr:8,overflow:"scroll",height:"85%",className:"org",sx:le(le({},U),{},{textAlign:t[r]}),children:(null===i||void 0===i?void 0:i.id)&&(0,C.jsxs)(j.k,{height:"100%",flexDirection:"column",justifyContent:"space-between",children:[(0,C.jsx)(ne,{setPreviewNode:n,previewNode:i,nodeById:o,nodeByCite:l,setSidebarHighlightedNode:s}),(0,C.jsx)(ie,{setPreviewNode:n,previewNode:i,nodeById:o,linksByNodeId:c,nodeByCite:l,setSidebarHighlightedNode:s})]})})},ce=t(25715),ae=t(86658),ue=t(61475),de=["style"];function he(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?he(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fe=function(e){var n=e.isOpen,t=e.onOpen,r=e.onClose,i=e.previewNode,o=e.setPreviewNode,l=e.nodeById,s=e.linksByNodeId,c=e.nodeByCite,u=e.setSidebarHighlightedNode,d=(0,a.useContext)(_.N).highlightColor,h=(0,a.useState)(),g=h[0],f=h[1];(0,a.useEffect)((function(){null!==i&&void 0!==i&&i.id?(t(),f(i)):r()}),[null===i||void 0===i?void 0:i.id]);var p=(0,a.useState)(1),m=p[0],y=p[1],O=(0,a.useState)("sans serif"),S=(O[0],O[1]),P=(0,a.useState)(0),N=(P[0],P[1]);return(0,C.jsx)(ce.M,{direction:"right",in:n,style:{width:"clamp(400px, 30%, 500px)"},unmountOnExit:!0,children:(0,C.jsx)(j.k,{flexDirection:"row",height:"100%",children:(0,C.jsxs)(w.xu,{pl:2,color:"black",bg:"alt.100",w:"100%",paddingBottom:15,children:[(0,C.jsxs)(j.k,{justifyContent:"space-between",paddingTop:4,pl:4,pb:5,pr:3,alignItems:"top",color:"black",children:[(0,C.jsxs)(j.k,{alignItems:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",children:[(0,C.jsx)(v.UY3,{}),(0,C.jsx)(te.X,{pl:2,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:1,size:"sm",fontWeight:600,color:"gray.800",children:null===g||void 0===g?void 0:g.title})]}),(0,C.jsx)(b.h,{icon:(0,C.jsx)(ue.U,{}),"aria-label":"Close file-viewer",variant:"link",onClick:r})]}),(0,C.jsx)(k,{setJustification:y,setIndent:N,setFont:S,justification:m}),(0,C.jsx)(ae.$B,{autoHide:!0,renderThumbVertical:function(e){var n=e.style,t=(0,x.Z)(e,de);return(0,C.jsx)(w.xu,ge({style:ge(ge({},n),{},{borderRadius:10,backgroundColor:d}),color:"black"},t))},children:(0,C.jsx)(re.gC,{height:"100%",alignItems:"left",bg:"alt.100",paddingLeft:4,children:(0,C.jsx)(se,{setPreviewNode:o,previewNode:i,nodeById:l,nodeByCite:c,setSidebarHighlightedNode:u,justification:m,justificationList:["justify","start","end","center"],linksByNodeId:s})})})]})})})},pe=t(54309),xe=t(57775),je=t(74860),be=t(36194),ve=[],me={};for(var ye in be.oY)for(var Ce in be.oY[ye]){var ke=ye+Ce;"LinearNone"===ke&&(ke="Linear"),ve.push(ke),me[ke]=be.oY[ye][Ce]}var we=me,Oe={enabled:!0,charge:-700,collision:!0,collisionStrength:20,centering:!0,centeringStrength:.2,linkStrength:.3,linkIts:1,alphaDecay:.05,alphaTarget:0,alphaMin:0,velocityDecay:.25,gravity:.3,gravityOn:!0,gravityLocal:!1},Se={orphans:!1,parent:"heading",filelessCites:!1,tagsBlacklist:[],tagsWhitelist:[],bad:!0,nodes:[],links:[],date:[]},Pe={particles:!1,particlesNumber:0,particlesWidth:4,arrows:!1,arrowsLength:1,arrowsPos:.5,arrowsColor:"",linkOpacity:.8,linkWidth:1,nodeRel:4,nodeOpacity:1,nodeResolution:12,labels:2,labelScale:1.5,labelFontSize:13,labelLength:40,labelWordWrap:25,labelLineSpace:1,highlight:!0,highlightNodeSize:2,highlightLinkSize:2,highlightFade:.8,highlightAnim:!0,animationSpeed:420,algorithmOptions:ve,algorithmName:"SinusoidalOut",linkColorScheme:"gray.500",nodeColorScheme:["red.500","gray.600","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","orange.500"],nodeHighlight:"purple.500",linkHighlight:"purple.500",backgroundColor:"white",emacsNodeColor:"gray.800",labelTextColor:"gray.900",labelBackgroundColor:"",labelBackgroundOpacity:.7,citeDashes:!0,citeDashLength:35,citeGapLength:15,citeLinkColor:"gray.700",citeLinkHighlightColor:"",citeNodeColor:"black",refDashes:!0,refDashLength:35,refGapLength:15,refLinkColor:"gray.700",refLinkHighlightColor:"",refNodeColor:"black",nodeSizeLinks:.5,nodeZoomSize:1.3},Ne={follow:"zoom",localSame:"add",zoomPadding:200,zoomSpeed:2e3},Ie={highlight:"hover",local:"double",follow:"never",context:"right",preview:"click"},Le=["red.500","orange.500","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","white","gray.100","gray.200","gray.300","gray.400","gray.500","gray.600","gray.700","gray.800","gray.900","black"],De=t(93924),ze=t(83986),Ee=t(48931),Re=t(96699),Te=t(40155),Ze=t(56769),Be=t(6569),Fe=t(67897),He=t(88134),Ae=t(47647);function Ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Me(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ve(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var We=function(e){var n=e.filter,t=e.setFilter,r=e.tags,i=e.highlightColor,l=e.mode,s=r.map((function(e){return{value:e,label:e}})),c="blacklist"===l?"tagsBlacklist":"tagsWhitelist",u=(0,a.useState)(n[c].map((function(e){return{value:e,label:e}}))),d=u[0],h=u[1];return(0,C.jsx)(Ae.CUIAutoComplete,{items:s,label:"Add tag to "+l,placeholder:" ",onCreateItem:function(e){return null},disableCreateItem:!0,selectedItems:d,onSelectedItemsChange:function(e){e.selectedItems&&(h(e.selectedItems),t(Me(Me({},n),{},(0,o.Z)({},c,e.selectedItems.map((function(e){return e.value}))))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{focusBorderColor:i,color:"gray.800",borderColor:"gray.600"},tagStyleProps:{rounded:"full",bg:i,height:8,paddingLeft:4,fontWeight:"bold"},hideToggleButton:!0,itemRenderer:function(e){return e.label}})},Xe=t(2827);function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=function(e){var n=e.colorList,t=e.tagColors,r=e.setTagColors,i=e.highlightColor,l=e.tags.map((function(e){return{value:e,label:e}})),s=(0,a.useState)(Object.keys(t).map((function(e){return{value:e,label:e}}))),c=s[0],u=s[1];return(0,C.jsxs)(w.xu,{children:[(0,C.jsx)(Ae.CUIAutoComplete,{items:l,label:"Add tag to filter",placeholder:" ",disableCreateItem:!0,selectedItems:c,onSelectedItemsChange:function(e){e.selectedItems&&(u(Array.from(new Set(e.selectedItems))),r(Object.fromEntries(Array.from(new Set(e.selectedItems)).map((function(e){var n;return[e.label,null!==(n=t[e.label])&&void 0!==n?n:"gray.600"]})))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{focusBorderColor:i,color:"gray.800",borderColor:"gray.600"},tagStyleProps:{display:"none",rounded:"full",bg:i,height:8,paddingLeft:4,fontWeight:"bold"},hideToggleButton:!0,itemRenderer:function(e){return e.label}}),(0,C.jsx)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:Object.keys(t).map((function(e){return(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",width:"100%",pl:2,children:[(0,C.jsx)(w.xu,{width:"100%",children:(0,C.jsx)(M.x,{fontWeight:"bold",children:e})}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,colorScheme:"",color:"black",children:(0,C.jsx)(w.xu,{bgColor:t[e],borderRadius:"sm",height:6,width:6})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsx)(Fe.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:n.map((function(n){return(0,C.jsx)(Fe.sN,{onClick:function(){return r(Ue(Ue({},t),{},(0,o.Z)({},e,n)))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(w.xu,{bgColor:n,borderRadius:"sm",height:6,width:6})},n)}))})]})]}),(0,C.jsx)(b.h,{"aria-label":"Delete tag color",variant:"ghost",icon:(0,C.jsx)(Xe.p,{}),onClick:function(){r(Object.fromEntries(Array.from(new Set(c)).map((function(e){var n;return[e.label,null!==(n=t[e.label])&&void 0!==n?n:"gray.600"]})))),u(c.filter((function(n){return n.value!==e})))}})]},e)}))})]})};function Qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Qe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Je=function(e){var n=e.filter,t=e.setFilter,r=e.tagColors,i=e.setTagColors,o=e.highlightColor,l=e.colorList,s=e.tags;return(0,C.jsxs)(w.xu,{children:[(0,C.jsxs)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Link children to..."}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,rightIcon:(0,C.jsx)(Be.v,{}),colorScheme:"",color:"black",children:function(){switch(n.parent){case"parent":return(0,C.jsx)(M.x,{children:"File"});case"heading":return(0,C.jsx)(M.x,{children:"Heading"});default:return(0,C.jsx)(M.x,{children:"Nothing"})}}()}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return t((function(e){return Ge(Ge({},e),{},{parent:""})}))},children:"Nothing"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t((function(e){return Ge(Ge({},e),{},{parent:"parent"})}))},children:"Parent file node"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t((function(e){return Ge(Ge({},e),{},{parent:"heading"})}))},children:"Next highest heading node"})]})]})]})]}),(0,C.jsxs)(j.k,{justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Orphans"}),(0,C.jsx)(He.r,{onChange:function(){t((function(e){return Ge(Ge({},e),{},{orphans:!e.orphans})}))},isChecked:n.orphans})]}),(0,C.jsxs)(j.k,{justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Citations without note files"}),(0,C.jsx)(He.r,{onChange:function(){t(Ge(Ge({},n),{},{filelessCites:!n.filelessCites}))},isChecked:n.filelessCites})]}),(0,C.jsxs)(j.k,{justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Non-existant nodes"}),(0,C.jsx)(He.r,{onChange:function(){i(Ge(Ge({},r),{},{bad:"white"})),t(Ge(Ge({},n),{},{bad:!n.bad}))},isChecked:n.bad})]})]}),(0,C.jsxs)(Ze.UQ,{padding:0,allowToggle:!0,allowMultiple:!0,paddingLeft:3,children:[(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsxs)(Ze.KF,{children:["Tag filters",(0,C.jsx)(Ze.XE,{})]}),(0,C.jsxs)(Ze.Hk,{pr:0,mr:0,children:[(0,C.jsx)(We,{highlightColor:o,filter:n,setFilter:t,tags:s,mode:"blacklist"}),(0,C.jsx)(We,{highlightColor:o,filter:n,setFilter:t,tags:s,mode:"whitelist"})]})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsxs)(Ze.KF,{children:["Tag Colors",(0,C.jsx)(Ze.XE,{})]}),(0,C.jsx)(Ze.Hk,{pr:0,mr:0,children:(0,C.jsx)(qe,{tags:s,colorList:l,tagColors:r,setTagColors:i,highlightColor:o})})]})]})]})},Ke=t(15267),Ye=t(24189),$e=function(e){var n=e.infoText;return(0,C.jsx)(w.xu,{paddingLeft:"1",children:(0,C.jsx)(Re.u,{label:n,placement:"top",color:"gray.100",bg:"gray.800",hasArrow:!0,children:(0,C.jsx)(Ye.h,{})})})},en=function(e){var n=e.value,t=e.onChange,r=e.label,i=e.infoText,o=e.children;return(0,C.jsxs)(w.xu,{paddingTop:2,children:[(0,C.jsxs)(w.xu,{display:"flex",justifyContent:"space-between",paddingBottom:2,children:[(0,C.jsxs)(w.xu,{display:"flex",alignItems:"center",children:[(0,C.jsx)(M.x,{children:r}),i&&(0,C.jsx)($e,{infoText:i})]}),(0,C.jsx)(He.r,{isChecked:!!n,onChange:t})]}),(0,C.jsx)(Ke.U,{in:!!n,animateOpacity:!0,children:(0,C.jsx)(w.xu,{paddingLeft:4,paddingTop:2,paddingBottom:2,children:o})})]},r)},nn=t(24682),tn=["min","max","step","value"],rn=function(e){var n=e.min,t=void 0===n?0:n,r=e.max,i=void 0===r?10:r,o=e.step,l=void 0===o?.1:o,s=e.value,c=void 0===s?1:s,u=(0,x.Z)(e,tn),d=u.onChange,h=u.label,g=u.infoText,f=(0,a.useContext)(_.N).highlightColor;return(0,C.jsxs)(w.xu,{children:[(0,C.jsxs)(w.xu,{display:"flex",alignItems:"flex-end",children:[(0,C.jsx)(M.x,{children:h}),g&&(0,C.jsx)($e,{infoText:g})]}),(0,C.jsxs)(nn.iR,{value:c,onChange:d,min:t,max:i,step:l,children:[(0,C.jsx)(nn.Uj,{children:(0,C.jsx)(nn.Ms,{})}),(0,C.jsx)(Re.u,{bg:f,label:c.toFixed(1),children:(0,C.jsx)(nn.gs,{bg:"white"})})]})]},h)};function on(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?on(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var sn=function(e){var n=e.physics,t=e.setPhysics,r=(0,a.useCallback)((function(e,n,r){t((function(t){return ln(ln({},t),{},(0,o.Z)({},n,e/r))}))}),[]);return(0,C.jsxs)(w.xu,{children:[(0,C.jsxs)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,C.jsxs)(en,{label:"Gravity",value:n.gravityOn,onChange:function(){return t(ln(ln({},n),{},{gravityOn:!n.gravityOn}))},children:[(0,C.jsxs)(j.k,{justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Also in local"}),(0,C.jsx)(He.r,{onChange:function(){t((function(e){return ln(ln({},e),{},{gravityLocal:!e.gravityLocal})}))},isChecked:n.gravityLocal})]}),(0,C.jsx)(rn,{label:"Strength",value:10*n.gravity,onChange:function(e){return r(e,"gravity",10)}})]}),(0,C.jsx)(rn,{value:-n.charge/100,onChange:function(e){return r(e,"charge",-.01)},label:"Repulsive Force"}),(0,C.jsx)(en,{label:"Collision",infoText:"Perfomance sap, disable if slow",value:n.collision,onChange:function(){return t(ln(ln({},n),{},{collision:!n.collision}))},children:(0,C.jsx)(rn,{value:n.collisionStrength/5,onChange:function(e){return r(e,"collisionStrength",.2)},label:"Collision Radius",infoText:"Easy with this one, high values can lead to a real jiggly mess"})}),(0,C.jsx)(rn,{value:5*n.linkStrength,onChange:function(e){return r(e,"linkStrength",5)},label:"Link Force"}),(0,C.jsx)(rn,{label:"Link Iterations",value:n.linkIts,onChange:function(e){return r(e,"linkIts",1)},min:0,max:6,step:1,infoText:"How many links down the line the physics of a single node affects (Slow)"}),(0,C.jsx)(rn,{label:"Viscosity",value:10*n.velocityDecay,onChange:function(e){return r(e,"velocityDecay",10)}})]}),(0,C.jsx)(w.xu,{children:(0,C.jsx)(Ze.UQ,{paddingLeft:3,allowToggle:!0,children:(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsxs)(Ze.KF,{children:[(0,C.jsx)(M.x,{children:"Advanced"}),(0,C.jsx)(Ze.XE,{marginRight:2})]}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsxs)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:3,color:"gray.800",children:[(0,C.jsx)(rn,{label:"Stabilization rate",value:50*n.alphaDecay,onChange:function(e){return r(e,"alphaDecay",50)}}),(0,C.jsx)(en,{label:"Center nodes",value:n.centering,onChange:function(){return t(ln(ln({},n),{},{centering:!n.centering}))},infoText:"Keeps the nodes in the center of the viewport. If disabled you can drag the nodes anywhere you want.",children:(0,C.jsx)(rn,{label:"Centering Strength",value:n.centeringStrength,max:2,step:.01,onChange:function(e){return r(e,"centeringStrength",1)}})})]})})]})})})]})},cn=t(46049);function an(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function un(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?an(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):an(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var dn=function(e){var n=e.visuals,t=e.setVisuals;return(0,C.jsx)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,C.jsx)(w.xu,{children:(0,C.jsx)(en,{label:"Highlight",onChange:function(){return t((function(e){return un(un({},e),{},{highlight:!e.highlight})}))},value:n.highlight,children:(0,C.jsxs)(re.gC,{spacing:1,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.400"}),align:"stretch",paddingLeft:0,children:[(0,C.jsx)(rn,{label:"Highlight Link Thickness",value:n.highlightLinkSize,onChange:function(e){return t((function(n){return un(un({},n),{},{highlightLinkSize:e})}))}}),(0,C.jsx)(rn,{label:"Highlight Node Size",value:n.highlightNodeSize,onChange:function(e){return t((function(n){return un(un({},n),{},{highlightNodeSize:e})}))}}),(0,C.jsx)(rn,{min:0,max:1,label:"Highlight Fade",value:n.highlightFade,onChange:function(e){return t((function(n){return un(un({},n),{},{highlightFade:e})}))}}),(0,C.jsxs)(en,{label:"Highlight Animation",onChange:function(){t((function(e){return un(un({},e),{},{highlightAnim:!e.highlightAnim})}))},value:n.highlightAnim,children:[(0,C.jsx)(rn,{label:"Animation speed",onChange:function(e){return t((function(n){return un(un({},n),{},{animationSpeed:e})}))},value:n.animationSpeed,infoText:"Slower speed has a chance of being buggy",min:50,max:1e3,step:10}),(0,C.jsx)(cn.Ph,{placeholder:n.algorithmName,onChange:function(e){t((function(n){return un(un({},n),{},{algorithmName:e.target.value})}))},children:n.algorithmOptions.map((function(e){return(0,C.jsx)("option",{value:e,children:e},e)}))})]})]})})})})},hn=t(67546),gn=t(93441);function fn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var xn=function(e){var n=e.label,t=e.colorList,r=e.value,i=e.visValue,l=e.setVisuals,s=(0,a.useCallback)((function(e){return l((function(n){return pn(pn({},n),{},(0,o.Z)({},r,e))}))}),[]);return(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:n}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,colorScheme:"",color:"black",rightIcon:(0,C.jsx)(Be.v,{}),children:(0,C.jsx)(w.xu,{bgColor:i,borderRadius:"sm",height:6,width:6})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return s("")},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(w.xu,{height:6,width:6})}),t.map((function(e){return(0,C.jsx)(Fe.sN,{onClick:function(){return s(e)},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(w.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))]})]})]})]})};function jn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var vn=function(e){var n=e.visuals,t=e.setVisualsCallback,r=e.highlightColor,o=e.setHighlightColor;return(0,C.jsx)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,C.jsxs)(w.xu,{children:[(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Nodes"}),(0,C.jsx)(Re.u,{label:"Shuffle node colors",children:(0,C.jsx)(b.h,{"aria-label":"Shuffle node colors",size:"sm",icon:(0,C.jsx)(hn.n,{}),variant:"ghost",onClick:function(){var e,r=null!==(e=n.nodeColorScheme)&&void 0!==e?e:[];t(bn(bn({},n),{},{nodeColorScheme:r.map((function(e){return[Math.random(),e]})).sort((function(e,n){return(0,l.Z)(e,1)[0]-(0,l.Z)(n,1)[0]})).map((function(e){var n=(0,l.Z)(e,2);n[0];return n[1]}))}))}})}),(0,C.jsx)(Re.u,{label:"Cycle node colors",children:(0,C.jsx)(b.h,{"aria-label":"Shift node colors",icon:(0,C.jsx)(gn.L,{}),size:"sm",variant:"ghost",onClick:function(){var e,r=null!==(e=n.nodeColorScheme)&&void 0!==e?e:[];t(bn(bn({},n),{},{nodeColorScheme:[].concat((0,i.Z)(r.slice(1,r.length)),[r[0]])}))}})}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",closeOnSelect:!1,matchWidth:!0,children:[(0,C.jsx)(Fe.j2,{width:20,as:Te.z,colorScheme:"",color:"black",rightIcon:(0,C.jsx)(Be.v,{}),children:(0,C.jsx)(j.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:n.nodeColorScheme.map((function(e){return(0,C.jsx)(w.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsx)(Fe.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:(0,C.jsx)(Fe.__,{width:500,type:"checkbox",defaultValue:n.nodeColorScheme,onChange:function(e){e.length&&t(bn(bn({},n),{},{nodeColorScheme:e}))},children:Le.map((function(e){return(0,C.jsx)(Fe.ii,{isChecked:n.nodeColorScheme.some((function(n){return n===e})),value:e,isDisabled:1===n.nodeColorScheme.length&&n.nodeColorScheme[0]===e,children:(0,C.jsx)(w.xu,{justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(w.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})})},e)}))})})]})]})]}),(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Links"}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,colorScheme:"",color:"black",rightIcon:(0,C.jsx)(Be.v,{}),children:(0,C.jsx)(w.xu,{children:n.linkColorScheme?(0,C.jsx)(w.xu,{bgColor:n.linkColorScheme,borderRadius:"sm",height:6,width:6}):(0,C.jsx)(j.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:n.nodeColorScheme.map((function(e){return(0,C.jsx)(w.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return t(bn(bn({},n),{},{linkColorScheme:""}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(j.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:n.nodeColorScheme.map((function(e){return(0,C.jsx)(w.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})}),Le.map((function(e){return(0,C.jsx)(Fe.sN,{onClick:function(){return t(bn(bn({},n),{},{linkColorScheme:e}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(w.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))]})]})]})]}),(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Accent"}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,colorScheme:"",color:"black",rightIcon:(0,C.jsx)(Be.v,{}),children:(0,C.jsx)(w.xu,{bgColor:r,borderRadius:"sm",height:6,width:6})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsx)(Fe.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:Le.map((function(e){return(0,C.jsx)(Fe.sN,{onClick:function(){return o(e)},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,C.jsx)(w.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))})]})]})]}),(0,C.jsx)(xn,{colorList:Le,label:"Link highlight",setVisuals:t,value:"linkHighlight",visValue:n.linkHighlight}),(0,C.jsx)(xn,{colorList:Le,label:"Node highlight",setVisuals:t,value:"nodeHighlight",visValue:n.nodeHighlight}),(0,C.jsx)(xn,{colorList:Le,label:"Background",setVisuals:t,value:"backgroundColor",visValue:n.backgroundColor}),(0,C.jsx)(xn,{colorList:Le,label:"Emacs node",setVisuals:t,value:"emacsNodeColor",visValue:n.emacsNodeColor})]})})};function mn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function yn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Cn=function(e){var n=e.visuals,t=e.setVisuals,r=e.threeDim;return(0,C.jsx)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,C.jsxs)(w.xu,{children:[(0,C.jsx)(rn,{label:"Node size",value:n.nodeRel,onChange:function(e){return t(yn(yn({},n),{},{nodeRel:e}))}}),(0,C.jsx)(rn,{label:"Node connections size scale",value:n.nodeSizeLinks,min:0,max:2,onChange:function(e){return t(yn(yn({},n),{},{nodeSizeLinks:e}))}}),(0,C.jsx)(rn,{label:"Node zoom invariance",value:n.nodeZoomSize,min:0,max:2,infoText:"How much the graph will try to keep the nodesize consistent across zoom scales. 0 is no consistency, node will always be their true size, 1 is linear, 2 is quadratic.",onChange:function(e){return t((function(n){return yn(yn({},n),{},{nodeZoomSize:e})}))}}),r&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(rn,{label:"Node opacity",value:n.nodeOpacity,min:0,max:1,onChange:function(e){return t(yn(yn({},n),{},{nodeOpacity:e}))}}),(0,C.jsx)(rn,{label:"Node resolution",value:n.nodeResolution,min:5,max:32,step:1,onChange:function(e){return t(yn(yn({},n),{},{nodeResolution:e}))}})]}),(0,C.jsx)(rn,{label:"Link width",value:n.linkWidth,onChange:function(e){return t(yn(yn({},n),{},{linkWidth:e}))}}),r&&(0,C.jsx)(rn,{label:"Link opacity",min:0,max:1,value:n.linkOpacity,onChange:function(e){return t(yn(yn({},n),{},{linkOpacity:e}))}}),(0,C.jsxs)(en,{label:"Link arrows",value:n.arrows,onChange:function(){return t(yn(yn({},n),{},{arrows:!n.arrows}))},children:[(0,C.jsx)(rn,{label:"Arrow size",value:n.arrowsLength/10,onChange:function(e){return t(yn(yn({},n),{},{arrowsLength:10*e}))}}),(0,C.jsx)(rn,{label:"Arrow Position",value:n.arrowsPos,min:0,max:1,step:.01,onChange:function(e){return t(yn(yn({},n),{},{arrowsPos:e}))}}),(0,C.jsx)(xn,{colorList:Le,label:"Arrow Color",setVisuals:t,value:"arrowsColor",visValue:n.arrowsColor},"arrow")]}),(0,C.jsxs)(en,{label:"Directional Particles",value:n.particles,onChange:function(){return t(yn(yn({},n),{},{particles:!n.particles}))},children:[(0,C.jsx)(rn,{label:"Particle Number",value:n.particlesNumber,max:5,step:1,onChange:function(e){return t(yn(yn({},n),{},{particlesNumber:e}))}}),(0,C.jsx)(rn,{label:"Particle Size",value:n.particlesWidth,onChange:function(e){return t(yn(yn({},n),{},{particlesWidth:e}))}})]})]})})};function kn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function wn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var On=function(e){var n=e.visuals,t=e.setVisuals;return(0,C.jsx)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,C.jsxs)(w.xu,{children:[(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Show labels"}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,colorScheme:"",color:"black",rightIcon:(0,C.jsx)(Be.v,{}),children:n.labels?n.labels<2?"On Highlight":"Always":"Never"}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{zIndex:"popover",bgColor:"gray.200",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return t(wn(wn({},n),{},{labels:0}))},children:"Never"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t(wn(wn({},n),{},{labels:1}))},children:"On Highlight"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t(wn(wn({},n),{},{labels:2}))},children:"Always"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t(wn(wn({},n),{},{labels:3}))},children:"Always (even in 3D)"})]})]})]})]}),(0,C.jsxs)(re.gC,{spacing:1,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.400"}),align:"stretch",paddingLeft:2,color:"gray.800",children:[(0,C.jsx)(rn,{label:"Label font size",value:n.labelFontSize,min:5,max:20,step:.5,onChange:function(e){return t(wn(wn({},n),{},{labelFontSize:e}))}}),(0,C.jsx)(rn,{label:"Max. label characters",value:n.labelLength,min:10,max:100,step:1,onChange:function(e){return t(wn(wn({},n),{},{labelLength:e}))}}),(0,C.jsx)(rn,{label:"Max. label line length",value:n.labelWordWrap,min:10,max:100,step:1,onChange:function(e){return t(wn(wn({},n),{},{labelWordWrap:e}))}}),(0,C.jsx)(rn,{label:"Space between label lines",value:n.labelLineSpace,min:.2,max:3,step:.1,onChange:function(e){return t(wn(wn({},n),{},{labelLineSpace:e}))}}),(0,C.jsx)(xn,{colorList:Le,label:"Text",setVisuals:t,value:"labelTextColor",visValue:n.labelTextColor}),(0,C.jsx)(xn,{colorList:Le,label:"Background",setVisuals:t,value:"labelBackgroundColor",visValue:n.labelBackgroundColor}),(0,C.jsx)(Ke.U,{in:!!n.labelBackgroundColor,animateOpacity:!0,children:(0,C.jsx)(w.xu,{paddingTop:2,children:(0,C.jsx)(rn,{label:"Background opacity",value:n.labelBackgroundOpacity,onChange:function(e){console.log(n.labelBackgroundOpacity),t(wn(wn({},n),{},{labelBackgroundOpacity:e}))},min:0,max:1,step:.01})})}),(0,C.jsx)(Ke.U,{in:n.labels>1,animateOpacity:!0,children:(0,C.jsx)(w.xu,{paddingTop:2,children:(0,C.jsx)(rn,{label:"Label Appearance Scale",value:5*n.labelScale,onChange:function(e){return t(wn(wn({},n),{},{labelScale:e/5}))}})})})]})]})})};function Sn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Sn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Nn=function(e){var n=e.visuals,t=e.setVisuals;return(0,C.jsx)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,C.jsxs)(w.xu,{children:[(0,C.jsxs)(en,{label:"Dash cite links",infoText:"Add dashes to citation links made with org-roam-bibtex",value:n.citeDashes,onChange:function(){return t(Pn(Pn({},n),{},{citeDashes:!n.citeDashes}))},children:[(0,C.jsx)(rn,{label:"Dash length",value:n.citeDashLength/10,onChange:function(e){return t(Pn(Pn({},n),{},{citeDashLength:10*e}))}}),(0,C.jsx)(rn,{label:"Gap length",value:n.citeGapLength/5,onChange:function(e){return t(Pn(Pn({},n),{},{citeGapLength:5*e}))}})]}),(0,C.jsx)(xn,{colorList:Le,label:"Citation node color",setVisuals:t,value:"citeNodeColor",visValue:n.citeNodeColor}),(0,C.jsx)(xn,{colorList:Le,label:"Citation link color",setVisuals:t,value:"citeLinkColor",visValue:n.citeLinkColor}),(0,C.jsx)(xn,{colorList:Le,label:"Reference link highlight",setVisuals:t,value:"citeLinkHighlightColor",visValue:n.citeLinkHighlightColor}),(0,C.jsxs)(en,{label:"Dash ref links",infoText:"Add dashes to citation links, whose target has a note, made with org-roam-bibtex",value:n.refDashes,onChange:function(){return t(Pn(Pn({},n),{},{refDashes:!n.refDashes}))},children:[(0,C.jsx)(rn,{label:"Dash length",value:n.refDashLength/10,onChange:function(e){return t(Pn(Pn({},n),{},{refDashLength:10*e}))}}),(0,C.jsx)(rn,{label:"Gap length",value:n.refGapLength/5,onChange:function(e){return t(Pn(Pn({},n),{},{refGapLength:5*e}))}})]}),(0,C.jsx)(xn,{colorList:Le,label:"Reference node color",setVisuals:t,value:"refNodeColor",visValue:n.refNodeColor}),(0,C.jsx)(xn,{colorList:Le,label:"Reference link color",setVisuals:t,value:"refLinkColor",visValue:n.refLinkColor}),(0,C.jsx)(xn,{colorList:Le,label:"Reference link highlight",setVisuals:t,value:"refLinkHighlightColor",visValue:n.refLinkHighlightColor})]})})},In=function(e){var n=e.visuals,t=e.setVisuals,r=e.highlightColor,i=e.setHighlightColor,o=e.threeDim,l=(0,a.useCallback)((function(e){return t(e)}),[]);return(0,C.jsx)(re.gC,{justifyContent:"flex-start",align:"stretch",children:(0,C.jsxs)(Ze.UQ,{allowToggle:!0,defaultIndex:[0],paddingLeft:3,children:[(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsx)(Ze.KF,{children:(0,C.jsxs)(j.k,{justifyContent:"space-between",w:"100%",children:[(0,C.jsx)(M.x,{children:"Colors"}),(0,C.jsx)(Ze.XE,{marginRight:2})]})}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(vn,{visuals:n,setVisualsCallback:l,highlightColor:r,setHighlightColor:i})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsx)(Ze.KF,{children:(0,C.jsxs)(j.k,{justifyContent:"space-between",w:"100%",children:[(0,C.jsx)(M.x,{children:"Nodes & Links"}),(0,C.jsx)(Ze.XE,{marginRight:2})]})}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(Cn,{visuals:n,setVisuals:l,threeDim:o})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsx)(Ze.KF,{children:(0,C.jsxs)(j.k,{justifyContent:"space-between",w:"100%",children:[(0,C.jsx)(M.x,{children:"Labels"}),(0,C.jsx)(Ze.XE,{marginRight:2})]})}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(On,{visuals:n,setVisuals:l})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsx)(Ze.KF,{children:(0,C.jsxs)(j.k,{justifyContent:"space-between",w:"100%",children:[(0,C.jsx)(M.x,{children:"Highlighting"}),(0,C.jsx)(Ze.XE,{marginRight:2})]})}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(dn,{visuals:n,setVisuals:l})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsx)(Ze.KF,{children:(0,C.jsxs)(j.k,{justifyContent:"space-between",w:"100%",children:[(0,C.jsx)(M.x,{children:"Citations"}),(0,C.jsx)(Ze.XE,{marginRight:2})]})}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(Nn,{visuals:n,setVisuals:l})})]})]})})};function Ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Dn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ln(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var zn=function(e){var n=e.behavior,t=e.setBehavior,r=e.mouse,i=e.setMouse;return(0,C.jsxs)(re.gC,{spacing:2,justifyContent:"flex-start",divider:(0,C.jsx)(re.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Preview node"}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,rightIcon:(0,C.jsx)(Be.v,{}),colorScheme:"",color:"black",children:(0,C.jsx)(M.x,{children:r.preview?r.preview[0].toUpperCase()+r.preview.slice(1):"Never"})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{preview:""}))},children:"Never"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{preview:"click"}))},children:"Click"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{preview:"double"}))},children:"Double Click"})]})]})]})]}),(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsxs)(j.k,{children:[(0,C.jsx)(M.x,{children:"Expand Node"}),(0,C.jsx)($e,{infoText:"View only the node and its direct neighbors"})]}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,rightIcon:(0,C.jsx)(Be.v,{}),colorScheme:"",color:"black",children:(0,C.jsx)(M.x,{children:r.local?r.local[0].toUpperCase()+r.local.slice(1):"Never"})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{zIndex:"popover",bgColor:"gray.200",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{local:""}))},children:"Never"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{local:"click"}))},children:"Click"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{local:"double"}))},children:"Double Click"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{local:"right"}))},children:"Right Click"})]})]})]})]}),(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Open in Emacs"}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,rightIcon:(0,C.jsx)(Be.v,{}),colorScheme:"",color:"black",children:(0,C.jsx)(M.x,{children:r.follow?r.follow[0].toUpperCase()+r.follow.slice(1):"Never"})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{follow:""}))},children:"Never"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{follow:"click"}))},children:"Click"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{follow:"double"}))},children:"Double Click"}),(0,C.jsx)(Fe.sN,{onClick:function(){return i(Dn(Dn({},r),{},{follow:"right"}))},children:"Right Click"})]})]})]})]}),(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(M.x,{children:"Follow Emacs by..."}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,rightIcon:(0,C.jsx)(Be.v,{}),colorScheme:"",color:"black",children:(0,C.jsx)(M.x,{children:n.follow[0].toUpperCase()+n.follow.slice(1)})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return t(Dn(Dn({},n),{},{follow:"color"}))},children:"Just coloring the currently opened node"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t(Dn(Dn({},n),{},{follow:"local"}))},children:"Opening the local graph"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t(Dn(Dn({},n),{},{follow:"zoom"}))},children:"Zooming to the current node"})]})]})]})]}),(0,C.jsxs)(j.k,{alignItems:"center",justifyContent:"space-between",children:[(0,C.jsxs)(j.k,{children:[(0,C.jsx)(M.x,{children:"Local graph"}),(0,C.jsx)($e,{infoText:"When in local mode and clicking a new node, should I add that node's local graph or open the new one?"})]}),(0,C.jsxs)(Fe.v2,{isLazy:!0,placement:"right",children:[(0,C.jsx)(Fe.j2,{as:Te.z,rightIcon:(0,C.jsx)(Be.v,{}),colorScheme:"",color:"black",children:(0,C.jsx)(M.x,{children:"add"===n.localSame?"Add":"Replace"})}),(0,C.jsxs)(X.h,{children:[" ",(0,C.jsxs)(Fe.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,C.jsx)(Fe.sN,{onClick:function(){return t(Dn(Dn({},n),{},{localSame:"replace"}))},children:"Open that nodes graph"}),(0,C.jsx)(Fe.sN,{onClick:function(){return t(Dn(Dn({},n),{},{localSame:"add"}))},children:"Add node to local graph"})]})]})]})]}),(0,C.jsx)(rn,{label:"Zoom speed",value:n.zoomSpeed,min:0,max:4e3,step:100,onChange:function(e){return t(Dn(Dn({},n),{},{zoomSpeed:e}))}}),(0,C.jsx)(rn,{label:"Zoom padding",value:n.zoomPadding,min:0,max:400,step:1,onChange:function(e){return t(Dn(Dn({},n),{},{zoomPadding:e}))},infoText:"How much to zoom out to accomodate all nodes when changing the view."})]})},En=["style"];function Rn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Tn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Rn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Rn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Zn=function(e){var n=e.physics,t=e.setPhysics,r=e.threeDim,i=e.setThreeDim,o=e.filter,s=e.setFilter,c=e.visuals,u=e.setVisuals,d=e.mouse,h=e.setMouse,f=e.behavior,p=e.setBehavior,j=e.tags,v=e.tagColors,m=e.setTagColors,y=g("showTweaks",!1),k=(0,l.Z)(y,2),O=k[0],S=k[1],P=(0,a.useContext)(_.N),N=P.highlightColor,I=P.setHighlightColor;return O?(0,C.jsxs)(w.xu,{bg:"alt.100",w:"xs",marginTop:10,marginLeft:10,borderRadius:"xl",paddingBottom:5,zIndex:300,position:"relative",boxShadow:"xl",maxH:.92*globalThis.innerHeight,marginBottom:10,children:[(0,C.jsxs)(w.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:2,paddingTop:1,children:[(0,C.jsx)(Re.u,{label:"2D",children:(0,C.jsx)(Te.z,{onClick:function(){return i(!r)},variant:"ghost",zIndex:"overlay",children:r?"3D":"2D"})}),(0,C.jsxs)(w.xu,{display:"flex",alignItems:"center",children:[(0,C.jsx)(Re.u,{label:"Reset settings to defaults",children:(0,C.jsx)(b.h,{"aria-label":"Reset Defaults",icon:(0,C.jsx)(ze.A,{}),onClick:function(){u(Pe),s(Se),h(Ie),t(Oe),p(Ne)},variant:"none",size:"sm"})}),(0,C.jsx)(b.h,{size:"sm",icon:(0,C.jsx)(Ee.T,{}),"aria-label":"Close Tweak Panel",variant:"ghost",onClick:function(){return S(!1)}})]})]}),(0,C.jsx)(ae.ZP,{autoHeight:!0,autoHeightMax:.85*globalThis.innerHeight,autoHide:!0,renderThumbVertical:function(e){var n=e.style,t=(0,x.Z)(e,En);return(0,C.jsx)(w.xu,Tn(Tn({},t),{},{style:Tn(Tn({},n),{},{borderRadius:10}),bg:N}))},children:(0,C.jsxs)(Ze.UQ,{allowMultiple:!0,allowToggle:!0,color:"black",children:[(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsxs)(Ze.KF,{children:[(0,C.jsx)(Ze.XE,{marginRight:2}),(0,C.jsx)(te.X,{size:"sm",children:"Filter"})]}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(Je,{filter:o,setFilter:s,tagColors:v,setTagColors:m,highlightColor:N,colorList:Le,tags:j})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsx)(Ze.KF,{display:"flex",justifyContent:"space-between",children:(0,C.jsxs)(w.xu,{display:"flex",children:[(0,C.jsx)(Ze.XE,{marginRight:2}),(0,C.jsx)(te.X,{size:"sm",children:"Physics"})]})}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(sn,{physics:n,setPhysics:t})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsxs)(Ze.KF,{children:[(0,C.jsx)(Ze.XE,{marginRight:2}),(0,C.jsx)(te.X,{size:"sm",children:"Visual"})]}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(In,{visuals:c,setVisuals:u,highlightColor:N,setHighlightColor:I,threeDim:r})})]}),(0,C.jsxs)(Ze.Qd,{children:[(0,C.jsxs)(Ze.KF,{children:[(0,C.jsx)(Ze.XE,{marginRight:2}),(0,C.jsx)(te.X,{size:"sm",children:"Behavior"})]}),(0,C.jsx)(Ze.Hk,{children:(0,C.jsx)(zn,{behavior:f,setBehavior:p,mouse:d,setMouse:h})})]})]})})]}):(0,C.jsx)(w.xu,{position:"absolute",zIndex:"overlay",marginTop:10,marginLeft:10,display:O?"none":"block",children:(0,C.jsx)(b.h,{variant:"ghost","aria-label":"Settings",icon:(0,C.jsx)(De.e,{}),onClick:function(){return S(!0)}})})},Bn=t(85675),Fn=t(94030),Hn=t(55830),An=t(46617),Vn=t(50862),Mn=t(68928);function Wn(e,n,t){t.send(JSON.stringify({command:e,data:n}))}function Xn(e,n){Wn("open",{id:e.id},n)}var _n=function(e){e.background;var n=e.node,t=(e.nodeType,e.coordinates),r=e.handleLocal,i=e.menuClose,o=e.scope,l=e.webSocket,s=e.setPreviewNode,c=(0,je.q)(),u=c.isOpen,d=c.onOpen,h=c.onClose;(0,a.useRef)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(w.xu,{position:"absolute",zIndex:"overlay",left:t[0]+10,top:t[1]-10,padding:5,children:(0,C.jsx)(Fe.v2,{closeOnBlur:!1,defaultIsOpen:!0,onClose:function(){return i()},children:(0,C.jsxs)(Fe.qy,{zIndex:"overlay",bgColor:"alt.100",borderColor:"gray.500",maxWidth:"xs",children:[n&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(te.X,{size:"sm",isTruncated:!0,px:3,py:1,children:n.title}),(0,C.jsx)(Fe.R,{borderColor:"gray.500"})]}),0!==o.nodeIds.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Fe.sN,{onClick:function(){return r(n,"add")},icon:(0,C.jsx)(Fn.I,{}),children:"Expand local graph at node"}),(0,C.jsx)(Fe.sN,{onClick:function(){return r(n,"replace")},icon:(0,C.jsx)(Hn.O,{}),children:"Open local graph for this node"})]}),null!==n&&void 0!==n&&n.properties.FILELESS?(0,C.jsx)(Fe.sN,{icon:(0,C.jsx)(Vn.d,{}),onClick:function(){return function(e,n){Wn("create",{id:e.id,title:e.title,ref:e.properties.ROAM_REFS},n)}(n,l)},children:"Create node"}):(0,C.jsx)(Fe.sN,{icon:(0,C.jsx)(An.d,{}),onClick:function(){return Xn(n,l)},children:"Open in Emacs"}),(null===n||void 0===n?void 0:n.properties.ROAM_REFS)&&(0,C.jsx)(Fe.sN,{icon:(0,C.jsx)(Mn.h,{}),children:"Open in Zotero"}),0===o.nodeIds.length&&(0,C.jsx)(Fe.sN,{icon:(0,C.jsx)(v.DvO,{}),onClick:function(){return r(n,"replace")},children:"Open local graph"}),(0,C.jsx)(Fe.sN,{icon:(0,C.jsx)(Hn.O,{}),onClick:function(){s(n)},children:"Preview"}),0===(null===n||void 0===n?void 0:n.level)&&(0,C.jsx)(Fe.sN,{closeOnSelect:!1,icon:(0,C.jsx)(Xe.p,{color:"red.500"}),color:"red.500",onClick:d,children:"Permenantly delete note"})]})})}),(0,C.jsxs)(Bn.u_,{isCentered:!0,isOpen:u,onClose:h,children:[(0,C.jsx)(Bn.ZA,{}),(0,C.jsxs)(Bn.hz,{zIndex:"popover",children:[(0,C.jsx)(Bn.xB,{children:"Delete node?"}),(0,C.jsx)(Bn.ol,{}),(0,C.jsx)(Bn.fe,{children:(0,C.jsxs)(re.gC,{spacing:4,display:"flex",alignItems:"flex-start",children:[(0,C.jsx)(M.x,{children:"This will permanently delete your note:"}),(0,C.jsx)(M.x,{fontWeight:"bold",children:null===n||void 0===n?void 0:n.title}),0!==(null===n||void 0===n?void 0:n.level)&&(0,C.jsx)(M.x,{children:"This will only delete the from this heading until but not including the next node. Your parent file and all other nodes will not be deleted."}),(0,C.jsx)(M.x,{children:"Are you sure you want to do continue?"})]})}),(0,C.jsxs)(Bn.mz,{children:[(0,C.jsx)(Te.z,{mr:3,onClick:function(){console.log("closing"),h(),i()},children:"Cancel"}),(0,C.jsx)(Te.z,{variant:"link",colorScheme:"red",ml:3,onClick:function(){console.log("aaaaa"),function(e,n){0===e.level&&Wn("delete",{id:e.id,file:e.file},n)}(n,l),h(),i()},children:"Delete node"})]})]})]})]})},Un=t(31122),qn=t(22663),Qn=t.n(qn),Gn=t(22003);function Jn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Kn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Jn(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Yn=t.e(907).then(t.bind(t,99907)),$n=t.g.window?t(24878).f$:null,et=t.g.window?t(24878).s6:null;function nt(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return(0,a.useEffect)((function(){t(!0)}),[]),n?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u.default,{children:(0,C.jsx)("title",{children:"ORUI"})}),(0,C.jsx)(tt,{})]}):null}function tt(){var e=g("3d",!1),n=(0,l.Z)(e,2),t=n[0],r=n[1],s=g("tagCols",{}),c=(0,l.Z)(s,2),u=c[0],d=c[1],h=(0,a.useState)({nodeIds:[]}),f=h[0],p=h[1],x=g("physics",Oe),v=(0,l.Z)(x,2),m=v[0],y=v[1],k=g("filter",Se),O=(0,l.Z)(k,2),S=O[0],P=O[1],N=g("visuals",Pe),I=(0,l.Z)(N,2),L=I[0],D=I[1],z=(0,a.useState)(null),E=z[0],R=z[1],T=(0,a.useState)(null),Z=T[0],B=T[1],F=g("behavior",Ne),H=(0,l.Z)(F,2),A=H[0],V=H[1],M=g("mouse",Ie),W=(0,l.Z)(M,2),X=W[0],U=W[1],q=(0,a.useState)({}),Q=q[0],G=q[1],J=(0,a.useState)(null),K=J[0],Y=J[1],$=(0,je.q)(),ee=$.isOpen,ne=$.onOpen,te=$.onClose,re=(0,a.useRef)({}),ie=(0,a.useRef)({}),oe=(0,a.useRef)({}),le=(0,a.useRef)([]),se=(0,a.useRef)(null),ce=(0,a.useRef)({nodes:[],links:[]});(0,a.useEffect)((function(){E&&(ce.current=E)}),[E]);var ae=(0,a.useContext)(_.N).setEmacsTheme,de=(0,a.useRef)({nodeIds:[]}),he=(0,a.useRef)(Ne);he.current=A;var ge=(0,a.useRef)(null);de.current=f;var pe=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;if("color"!==e){var l=se.current,s=de.current,c=he.current,a=null!==(t=ie.current[n])&&void 0!==t?t:[],u=Object.fromEntries([n].concat((0,i.Z)(a.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]})));if("zoom"===e)return s.nodeIds.length&&p({nodeIds:[]}),void setTimeout((function(){return l.zoomToFit(r,o,(function(e){return u[e.id]}))}),50);if(!s.nodeIds.length)return p({nodeIds:[n]}),void setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50);if("add"!==c.localSame)return p({nodeIds:[n]}),void setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50);if(!s.nodeIds.includes(n)||!s.nodeIds.some((function(e){return u[e]})))return p({nodeIds:[n]}),void setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50);p((function(e){return Kn(Kn({},e),{},{nodeIds:[].concat((0,i.Z)(e.nodeIds),[n])})})),setTimeout((function(){l.centerAt(0,0,10),l.zoomToFit(1,o)}),50)}};return(0,a.useEffect)((function(){ge.current=new Gn.Z("ws://localhost:35903"),ge.current.addEventListener("open",(function(){console.log("Connection with Emacs established")})),ge.current.addEventListener("message",(function(e){var n=he.current,t=JSON.parse(e.data);switch(t.type){case"graphdata":return function(e){var n,t,r,s=re.current;le.current=null!==(n=e.tags)&&void 0!==n?n:[];var c=null!==(t=e.nodes)&&void 0!==t?t:[],a=null!==(r=e.links)&&void 0!==r?r:[],u=c.reduce((function(e,n){var t;return Kn(Kn({},e),{},(0,o.Z)({},n.file,[].concat((0,i.Z)(null!==(t=e[n.file])&&void 0!==t?t:[]),[n])))}),{}),d=Object.keys(u).flatMap((function(e){var n,t=null!==(n=u[e])&&void 0!==n?n:[],r=t.find((function(e){return 0===e.level})),i=t.filter((function(e){return 0!==e.level}));return r?i.map((function(e){var n=t.filter((function(n){var t;return!(n.level>=e.level||n.pos>=e.pos||null===(t=e.olp)||void 0===t||!t.includes(n.title))})).reduce((function(e,n){return n.level>e.level&&(e=n),e}),r);return{source:e.id,target:(null===n||void 0===n?void 0:n.id)||r.id,type:"heading"}})):[]})),h=Object.keys(u).flatMap((function(e){var n,t=null!==(n=u[e])&&void 0!==n?n:[],r=t.find((function(e){return 0===e.level})),i=t.filter((function(e){return 0!==e.level}));return r?i.map((function(e){return{source:e.id,target:r.id,type:"parent"}})):[]}));re.current=Object.fromEntries(c.map((function(e){return[e.id,e]})));var g=[].concat((0,i.Z)(a),(0,i.Z)(d),(0,i.Z)(h)),f=[],p=g.map((function(e){var n=e.source,t=e.target;return re.current[n]?re.current[t]?e:(f.push({id:t,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:t,level:0,pos:0,olp:null}),Kn(Kn({},e),{},{type:"bad"})):(f.push({id:n,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:n,level:0,pos:0,olp:null}),Kn(Kn({},e),{},{type:"bad"}))}));re.current=Kn(Kn({},re.current),Object.fromEntries(f.map((function(e){return[e.id,e]})))),ie.current=p.reduce((function(e,n){var t,r,l;return Kn(Kn({},e),{},(l={},(0,o.Z)(l,n.source,[].concat((0,i.Z)(null!==(t=e[n.source])&&void 0!==t?t:[]),[n])),(0,o.Z)(l,n.target,[].concat((0,i.Z)(null!==(r=e[n.target])&&void 0!==r?r:[]),[n])),l))}),{});var x=[].concat((0,i.Z)(c),f);oe.current=x.reduce((function(e,n){var t,r=null===(t=n.properties)||void 0===t?void 0:t.ROAM_REFS;if(null===r||void 0===r||!r.includes("cite"))return e;var i=r.replaceAll(/cite:(.*)/g,"$1");return i?Kn(Kn({},e),{},(0,o.Z)({},i,n)):e}),{});var j={nodes:x,links:p},b=ce.current;if(0===b.nodes.length){var v=JSON.parse(JSON.stringify(j));return ce.current=v,void R(v)}var m=[].concat((0,i.Z)(b.nodes.flatMap((function(e){var n,t=null!==(n=re.current[null===e||void 0===e?void 0:e.id])&&void 0!==n&&n;return t?[Kn(Kn({},e),t)]:[]}))),(0,i.Z)(Object.keys(re.current).filter((function(e){return!s[e]})).map((function(e){return re.current[e]})))),y=m.reduce((function(e,n,t){var r=null===n||void 0===n?void 0:n.id;return Kn(Kn({},e),{},(0,o.Z)({},r,t))}),{}),C=p.map((function(e){var n=ot(e),t=(0,l.Z)(n,2),r=t[0],i=t[1];return Kn(Kn({},e),{},{source:m[y[r]],target:m[y[i]]})}));R({nodes:m,links:C})}(t.data);case"theme":return ae(t.data);case"command":switch(t.data.commandName){case"local":var r=A.zoomSpeed,s=A.zoomPadding;pe("local",t.data.id,r,s),B(t.data.id);break;case"zoom":var c,a,u=(null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.speed)||n.zoomSpeed,d=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.padding)||n.zoomPadding;pe("zoom",t.data.id,u,d),B(t.data.id);break;case"follow":pe(n.follow,t.data.id,n.zoomSpeed,n.zoomPadding),B(t.data.id);break;default:return console.error("unknown message type",t.type)}}}))}),[]),(0,a.useEffect)((function(){var e=se.current;!e||f.nodeIds.length>1||(f.nodeIds.length||!m.gravityOn?setTimeout((function(){e.zoomToFit(5,200)}),50):e.zoomToFit())}),[f.nodeIds]),E?(0,C.jsxs)(w.xu,{display:"flex",alignItems:"flex-start",flexDirection:"row",height:"100%",overflow:"hidden",children:[(0,C.jsxs)(w.xu,{display:"flex",justifyContent:"space-between",flexDirection:"row",height:"100%",width:"100%",children:[(0,C.jsx)(Zn,{physics:m,setPhysics:y,threeDim:t,setThreeDim:r,filter:S,setFilter:P,visuals:L,setVisuals:D,mouse:X,setMouse:U,behavior:A,setBehavior:V,tagColors:u,setTagColors:d,tags:le.current}),(0,C.jsx)(j.k,{height:"100%",flexDirection:"column",marginLeft:"auto",children:!ee&&(0,C.jsx)(b.h,{icon:(0,C.jsx)(ue.U,{}),"aria-label":"Open org-viewer",zIndex:2,onClick:ne,variant:"ghost",marginTop:10,mr:8})})]}),(0,C.jsxs)(j.k,{position:"absolute",alignItems:"top",overflow:"hidden",children:[(0,C.jsx)(rt,{ref:se,nodeById:re.current,linksByNodeId:ie.current,webSocket:ge.current,physics:m,graphData:E,threeDim:t,emacsNodeId:Z,filter:S,visuals:L,behavior:A,mouse:X,scope:f,setScope:p,tagColors:u,setPreviewNode:G,sidebarHighlightedNode:K}),(0,C.jsx)(fe,{isOpen:ee,onOpen:ne,onClose:te,previewNode:Q,setPreviewNode:G,setSidebarHighlightedNode:Y,nodeById:re.current,linksByNodeId:ie.current,nodeByCite:oe.current})]})]}):null}var rt=(0,a.forwardRef)((function(e,n){var t=e.physics,s=e.graphData,u=e.threeDim,d=e.linksByNodeId,h=e.filter,g=e.emacsNodeId,f=e.nodeById,x=e.visuals,j=e.behavior,b=e.mouse,v=e.scope,m=e.setScope,y=e.webSocket,k=e.tagColors,O=e.setPreviewNode,S=e.sidebarHighlightedNode,P=(0,pe.iP)(),N=(0,l.Z)(P,2),I=(N[0],N[1]),L=(0,a.useState)(null),D=L[0],z=L[1],E=(0,a.useState)(null),R=E[0],T=E[1],Z=(0,a.useState)([0,0]),B=Z[0],F=Z[1],H=(0,V.useTheme)(),A=(0,a.useContext)(_.N).emacsTheme,M=function(e,n){"replace"!==n?v.nodeIds.includes(e.id)||m((function(n){return Kn(Kn({},n),{},{nodeIds:[].concat((0,i.Z)(n.nodeIds),[e.id])})})):m({nodeIds:[e.id]})},W=(0,je.q)(),X=function(e,n,t){switch(e){case b.local:M(n,j.localSame);break;case b.follow:Xn(n,y);break;case b.context:!function(e,n){F([n.pageX,n.pageY]),T(e),W.onOpen()}(n,t);case b.preview:O(n)}},U=(0,a.useRef)(null);(0,a.useEffect)((function(){g&&z(f[g])}),[g]);var q=(0,a.useRef)({}),Q=(0,a.useRef)({}),G=(0,a.useMemo)((function(){var e;Q.current={};var n=null===s||void 0===s||null===(e=s.nodes)||void 0===e?void 0:e.filter((function(e){var n=e;return h.tagsBlacklist.length&&h.tagsBlacklist.some((function(e){return n.tags.indexOf(e)>-1}))||h.tagsWhitelist.length>0&&!h.tagsWhitelist.some((function(e){return n.tags.indexOf(e)>-1}))||h.filelessCites&&n.properties.FILELESS?(Q.current=Kn(Kn({},Q.current),{},(0,o.Z)({},n.id,n)),!1):!h.bad||!n.properties.bad||(Q.current=Kn(Kn({},Q.current),{},(0,o.Z)({},n.id,n)),!1)})).filter((function(e){var n,t=(null!==(n=d[null===e||void 0===e?void 0:e.id])&&void 0!==n?n:[]).filter((function(e){return!Q.current[e.source]&&!Q.current[e.target]}));return!h.orphans||(h.parent?0!==t.length:0!==t.length&&t.some((function(e){return!["parent","heading"].includes(e.type)})))})),t=n.map((function(e){return e.id})),r=s.links.filter((function(e){var n=ot(e),r=(0,l.Z)(n,2),i=r[0],o=r[1];if(!t.includes(i)||!t.includes(o))return!1;var s=e;return h.parent?"heading"===h.parent?"parent"!==s.type:"heading"!==s.type:!["parent","heading"].includes(s.type)}));return q.current=r.reduce((function(e,n){var t,r,s,c=n,a=ot(c),u=(0,l.Z)(a,2),d=u[0],h=u[1];return Kn(Kn({},e),{},(s={},(0,o.Z)(s,d,[].concat((0,i.Z)(null!==(t=e[d])&&void 0!==t?t:[]),[c])),(0,o.Z)(s,h,[].concat((0,i.Z)(null!==(r=e[h])&&void 0!==r?r:[]),[c])),s))}),{}),{nodes:n,links:r}}),[h,s]),J=(0,a.useState)({nodes:[],links:[]}),K=J[0],Y=J[1];(0,a.useEffect)((function(){if(v.nodeIds.length){var e=v.nodeIds.length>1?K.nodes:[],n=e.map((function(e){return e.id})),t=function(e,n){var t=[e[0]],r=[],i=[e[0]];return Array.from({length:n},(function(){t.forEach((function(e){var n;(null!==(n=q.current[e])&&void 0!==n?n:[]).forEach((function(e){var n=ot(e),t=(0,l.Z)(n,2),o=t[0],s=t[1];i.includes(o)?i.includes(s)||r.push(s):r.push(o)}))})),t=r,r.forEach((function(e){return e&&i.push(e)})),r=[]})),i}(v.nodeIds,1),r=G.nodes.filter((function(r){var i;return e.length?!n.includes(r.id)&&(null!==(i=q.current[r.id])&&void 0!==i?i:[]).some((function(e){return v.nodeIds.includes(e.source)||v.nodeIds.includes(e.target)})):t.includes(r.id)})).map((function(e){return Kn(Kn({},e),{},{x:0,y:0,vy:0,vx:0})})),o=[].concat((0,i.Z)(e),(0,i.Z)(r)),s=o.map((function(e){return e.id})),c=v.nodeIds.length>1?K.links:[],a=G.links.filter((function(e){var t=ot(e),r=(0,l.Z)(t,2),i=r[0],o=r[1];return!(c.length&&n.includes(o)&&n.includes(i))&&(s.includes(i)&&s.includes(o))})).map((function(e){var n=ot(e),t=(0,l.Z)(n,2);return{source:t[0],target:t[1]}})),u=[].concat((0,i.Z)(c),(0,i.Z)(a));Y({nodes:o,links:u})}}),[h,v,s]),(0,a.useEffect)((function(){(0,r.Z)(c().mark((function e(){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.current,e.next=3,Yn;case 3:i=e.sent,!t.gravityOn||v.nodeIds.length&&!t.gravityLocal?(r.d3Force("x",null),r.d3Force("y",null),u&&r.d3Force("z",null)):(r.d3Force("x",i.forceX().strength(t.gravity)),r.d3Force("y",i.forceY().strength(t.gravity)),u&&r.d3Force("z",i.forceZ().strength(t.gravity))),t.centering?r.d3Force("center",i.forceCenter().strength(t.centeringStrength)):r.d3Force("center",null),t.linkStrength&&r.d3Force("link").strength(t.linkStrength),t.linkIts&&r.d3Force("link").iterations(t.linkIts),t.charge&&r.d3Force("charge").strength(t.charge),r.d3Force("collide",t.collision?i.forceCollide().radius(t.collisionStrength):null);case 10:case"end":return e.stop()}}),e)})))()}),[t,u,v]),(0,a.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.d3ReheatSimulation()}),[t,v.nodeIds.length]);var $=(0,a.useRef)(0),ee=(0,a.useState)(1),ne=ee[0],te=ee[1],re=(0,xe._7)((function(e){return te(e)}),{duration:x.animationSpeed,algorithm:we[x.algorithmName]}),ie=(0,l.Z)(re,2),oe=ie[0],le=ie[1],se=(0,xe._7)((function(e){return te(Math.min(ne,-1*(e-1)))}),{duration:x.animationSpeed,algorithm:we[x.algorithmName]}),ce=(0,l.Z)(se,2),ae=ce[0],ue=ce[1];(0,a.useEffect)((function(){console.log("aaa"),null!==S&&void 0!==S&&S.id?z(S):z(null)}),[S]);var de=(0,a.useMemo)((function(){if(!U.current)return{};var e=q.current[U.current.id];return e?Object.fromEntries([U.current.id].concat((0,i.Z)(e.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]}))):{}}),[JSON.stringify(U.current),JSON.stringify(q.current)]),he=(0,a.useRef)(null);(0,a.useEffect)((function(){if(U.current=D,D&&(he.current=D),!x.highlightAnim)return te(D?1:0);D?oe():(le(),ne>.5?ae():te(0))}),[D]);var ge=(0,a.useMemo)((function(){return Object.fromEntries(Le.map((function(e){var n=lt(e,H),t=Le.map((function(e){return[e,p.Z(n,lt(e,H))]}));return[e,Object.fromEntries(t)]})))}),[A]),fe=(0,a.useMemo)((function(){var e,n,t,r=null!==(e=q.current[null===(n=he.current)||void 0===n?void 0:n.id])&&void 0!==e?e:[];return Object.fromEntries([null===(t=he.current)||void 0===t?void 0:t.id].concat((0,i.Z)(r.flatMap((function(e){return ot(e)})))).map((function(e){return[e,{}]})))}),[JSON.stringify(D),he.current,q.current]),be=function(e){var n,t,r,i,o,l=null!==(n=null===(t=q.current[e])||void 0===t?void 0:t.length)&&void 0!==n?n:0;return x.nodeColorScheme[(r=l,i=0,o=x.nodeColorScheme.length-1,Math.min(Math.max(r,i),o))]},ve=function(e,n){return q.current[e].length>q.current[n].length?be(e):be(n)},me=(0,a.useMemo)((function(){return lt(x.labelTextColor,H)}),[x.labelTextColor,A]),ye=(0,a.useMemo)((function(){return lt(x.labelBackgroundColor,H)}),[x.labelBackgroundColor,A]),Ce=function(e){var n,t=null!==(n=q.current[e.id])&&void 0!==n?n:[],r=t.length?t.filter((function(e){return"parent"===e.type})).length:0,i=3+t.length*x.nodeSizeLinks-(h.parent?0:r);return 1===x.highlightNodeSize?i:i*(de[e.id]||fe[e.id]?1+ne*(x.highlightNodeSize-1):1)},ke=(0,a.useState)(!1),Oe=ke[0],Se=ke[1],Pe=(0,a.useState)(1),Ne=Pe[0],Ie=Pe[1],De={graphData:v.nodeIds.length?K:G,height:I,backgroundColor:H.colors.gray[x.backgroundColor],warmupTicks:1===v.nodeIds.length?100:v.nodeIds.length>1?20:0,onZoom:function(e){var n=e.k;e.x,e.y;return Ie(n)},nodeLabel:function(e){return e.title},nodeColor:function(e){return function(e,n){var t=de[e.id]||fe[e.id];if(x.emacsNodeColor&&e.id===g)return lt(x.emacsNodeColor,n);if(k&&e.tags.some((function(e){return k[e]}))){var r=k[e.tags.filter((function(e){return k[e]}))[0]];return ge[r][x.backgroundColor](x.highlightFade*ne)}return x.citeNodeColor&&e.properties.ROAM_REFS&&e.properties.FILELESS?t?lt(x.citeNodeColor,n):ge[x.citeNodeColor][x.backgroundColor](x.highlightFade*ne):x.refNodeColor&&e.properties.ROAM_REFS?t?lt(x.refNodeColor,n):ge[x.refNodeColor][x.backgroundColor](x.highlightFade*ne):t?x.nodeHighlight?ge[be(e.id)][x.nodeHighlight](ne):lt(be(e.id),n):ge[be(e.id)][x.backgroundColor](x.highlightFade*ne)}(e,H)},nodeRelSize:x.nodeRel,nodeVal:function(e){return Ce(e)/Math.pow(Ne,x.nodeZoomSize)},nodeCanvasObject:function(e,n,t){if(e&&!Oe&&x.labels){var r=fe[e.id];if(!(t<=x.labelScale||1===x.labels)||de[e.id]||r){var o=e.title,l=o.substring(0,x.labelLength),s=x.labelFontSize/(.75*Math.min(Math.max(.5,t),3)),c=[1.1*n.measureText(l).width,s].map((function(e){return e+.5*s})),a=Math.min(3*(t-x.labelScale)/x.labelScale,1),u=function(){return 1===x.labels||t<=x.labelScale?ne:de[e.id]||fe[e.id]?Math.max(a,ne):1*a*(-1*(x.highlightFade*ne-1))},d=8*Math.cbrt(Ce(e)*x.nodeRel);if(x.labelBackgroundColor&&x.labelBackgroundOpacity){var h=u()*x.labelBackgroundOpacity,g=st(ye,h);n.fillStyle=g,n.fillRect.apply(n,[e.x-c[0]/2,e.y-c[1]/2+d].concat((0,i.Z)(c)))}var f=u();n.textAlign="center",n.textBaseline="middle";var p=st(me,f);n.fillStyle=p,n.font="".concat(s,"px Sans-Serif");var j=Qn()(l,{width:x.labelWordWrap}).split("\n");(o.length>x.labelLength?[].concat((0,i.Z)(j.slice(0,-1)),["".concat(j.slice(-1),"...")]):j).forEach((function(t,r){n.fillText(t,e.x,e.y+d+x.labelLineSpace*s*r)}))}}},nodeCanvasObjectMode:function(){return"after"},linkDirectionalParticles:x.particles?x.particlesNumber:void 0,linkDirectionalArrowLength:x.arrows?x.arrowsLength:void 0,linkDirectionalArrowRelPos:x.arrowsPos,linkDirectionalArrowColor:x.arrowsColor?function(){return lt(x.arrowsColor,H)}:void 0,linkColor:function(e){var n,t="object"===typeof e.source?e.source.id:e.source,r="object"===typeof e.target?e.target.id:e.target,i=it(e,U.current),o=it(e,he.current),l=i||o,s=e;return x.refLinkColor&&"ref"===s.type?l&&(x.refLinkHighlightColor||x.linkHighlight)?ge[x.refLinkColor][x.refLinkHighlightColor||x.linkHighlight](ne):ge[x.refLinkColor][x.backgroundColor](x.highlightFade*ne):x.citeLinkColor&&null!==(n=s.type)&&void 0!==n&&n.includes("cite")?l&&(x.citeLinkHighlightColor||x.linkHighlight)?ge[x.citeLinkColor][x.citeLinkHighlightColor||x.linkHighlight](ne):ge[x.citeLinkColor][x.backgroundColor](x.highlightFade*ne):function(e,n,t,r){if(!x.linkHighlight&&!x.linkColorScheme&&!t)return lt(ve(e,n),r);if(!t&&!x.linkColorScheme){var i=ve(e,n);return ge[i][x.backgroundColor](x.highlightFade*ne)}return t?x.linkHighlight||x.linkColorScheme?x.linkHighlight?x.linkColorScheme?ge[x.linkColorScheme][x.linkHighlight](ne):ge[ve(e,n)][x.linkHighlight](ne):lt(x.linkColorScheme,r):lt(ve(e,n),r):ge[x.linkColorScheme][x.backgroundColor](x.highlightFade*ne)}(t,r,l,H)},linkWidth:function(e){if(1===x.highlightLinkSize)return x.linkWidth;var n=it(e,U.current),t=it(e,he.current);return n||t?x.linkWidth*(1+ne*(x.highlightLinkSize-1)):x.linkWidth},linkDirectionalParticleWidth:x.particlesWidth,d3AlphaDecay:t.alphaDecay,d3AlphaMin:t.alphaMin,d3VelocityDecay:t.velocityDecay,onNodeClick:function(e,n){var t=e;W.onClose();var r=n.timeStamp-$.current<200;if($.current=n.timeStamp,r)return X("double",t,n);var i=$.current;return setTimeout((function(){if($.current===i)return X("click",t,n)}),200)},onBackgroundClick:function(){W.onClose(),z(null),0!==v.nodeIds.length&&m((function(e){return Kn(Kn({},e),{},{nodeIds:[]})}))},onNodeHover:function(e){x.highlight&&(D||(ue(),te(0)),z(e))},onNodeRightClick:function(e,n){X("right",e,n)},onNodeDrag:function(e){W.onClose(),z(e),Se(!0)},onNodeDragEnd:function(){z(null),Se(!1)}};return(0,C.jsxs)(w.xu,{overflow:"hidden",children:[W.isOpen&&(0,C.jsx)(_n,{scope:v,node:R,nodeType:null===R||void 0===R?void 0:R.id,background:!1,coordinates:B,handleLocal:M,menuClose:W.onClose.bind(W),webSocket:y,setPreviewNode:O}),u?(0,C.jsx)(et,Kn(Kn({ref:n},De),{},{nodeThreeObjectExtend:!0,backgroundColor:H.colors.white,nodeOpacity:x.nodeOpacity,nodeResolution:x.nodeResolution,linkOpacity:x.linkOpacity,nodeThreeObject:function(e){if(x.labels&&(!(x.labels<3)||de[e.id])){var n=new Un.Z(e.title.substring(0,40));return n.color=lt(x.labelTextColor,H),n.backgroundColor=lt(x.labelBackgroundColor,H),n.padding=2,n.textHeight=8,n}}})):(0,C.jsx)($n,Kn(Kn({ref:n},De),{},{linkLineDash:function(e){var n,t=e;return x.citeDashes&&null!==(n=t.type)&&void 0!==n&&n.includes("cite")?[x.citeDashLength,x.citeGapLength]:x.refDashes&&"ref"==t.type?[x.refDashLength,x.refGapLength]:null}}))]})}));function it(e,n){var t,r;return(null===(t=e.source)||void 0===t?void 0:t.id)===(null===n||void 0===n?void 0:n.id)||(null===(r=e.target)||void 0===r?void 0:r.id)===(null===n||void 0===n?void 0:n.id)}function ot(e){return["object"===typeof e.source?e.source.id:e.source,"object"===typeof e.target?e.target.id:e.target]}function lt(e,n){return e.split(".").reduce((function(e,n){return e[n]}),n.colors)}function st(e,n){return"rgba("+(e=e.replace("#","")).match(new RegExp("(.{"+e.length/3+"})","g")).map((function(n){return parseInt(e.length%2?n+n:n,16)})).concat(isFinite(n)?n:1).join(",")+")"}},45301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(78706)}])}},function(e){e.O(0,[774,737,874,573,446,340,888,179],(function(){return n=45301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);