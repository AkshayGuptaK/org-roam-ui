(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{96834:function(e,n,t){"use strict";t.r(n),t.d(n,{Graph:function(){return Re},GraphPage:function(){return De},default:function(){return Ne}});var r=t(809),i=t.n(r),o=t(92447),l=t(85893),s=t(59999),a=t(26265),c=t(64121),u=t(67294);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=f(e,null!==(t=r.storage)&&void 0!==t?t:localStorage),o=i.get(),l=void 0!==o?o:n;l!==o&&i.update(l);var s="object"===typeof o?h(h({},o),l):l,a=(0,u.useState)(s),c=a[0],d=a[1];(0,u.useEffect)((function(){c!==s&&d(s)}),[e]);var g=function(e){e instanceof Function?d((function(n){var t=e(n);return i.update(t),t})):(d(e),i.update(e))};return[c,g]}function f(e,n){return{get:function(){var t=n.getItem(e);if(t&&"undefined"!==t)return JSON.parse(t)},update:function(t){n.setItem(e,JSON.stringify(t))},remove:function(){n.removeItem(e)}}}var x=t(54533),p=t(54309),j=t(20233),m=t(40980),v=t(48017),b=t(74860),C=t(36194),y=[],k={};for(var w in C.oY)for(var S in C.oY[w]){var O=w+S;"LinearNone"===O&&(O="Linear"),y.push(O),k[O]=C.oY[w][S]}var L=k,I={enabled:!0,charge:-700,collision:!0,collisionStrength:20,centering:!0,centeringStrength:.05,linkStrength:.3,linkIts:1,alphaDecay:.1,alphaTarget:0,alphaMin:0,velocityDecay:.25,gravity:.3,gravityOn:!0},N={orphans:!1,parents:!0,filelessCites:!1,tagsBlacklist:[],tagsWhitelist:[],bad:!0,nodes:[],links:[],date:[]},z={particles:!1,particlesNumber:0,particlesWidth:4,arrows:!1,arrowsLength:1,arrowsPos:.5,arrowsColor:"",linkOpacity:.8,linkWidth:1,nodeRel:4,nodeOpacity:1,nodeResolution:12,labels:2,labelScale:1.5,labelFontSize:13,labelLength:40,highlight:!0,highlightNodeSize:2,highlightLinkSize:2,highlightFade:.8,highlightAnim:!0,animationSpeed:420,algorithmOptions:y,algorithmName:"SinusoidalOut",linkColorScheme:"gray.500",nodeColorScheme:["red.500","gray.600","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","orange.500"],nodeHighlight:"purple.500",linkHighlight:"purple.500",backgroundColor:"white",emacsNodeColor:"gray.800",labelTextColor:"gray.900",labelBackgroundColor:"",labelBackgroundOpacity:.7,citeDashes:!0,citeDashLength:35,citeGapLength:15,citeLinkColor:"gray.700",citeLinkHighlightColor:"",citeNodeColor:"black",refDashes:!0,refDashLength:35,refGapLength:15,refLinkColor:"gray.700",refLinkHighlightColor:"",refNodeColor:"black",nodeSizeLinks:.5},D={follow:"zoom",localSame:"add",zoomPadding:200,zoomSpeed:2e3},R={highlight:"hover",local:"click",follow:"double"},E=["red.500","orange.500","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","white","gray.100","gray.200","gray.300","gray.400","gray.500","gray.600","gray.700","gray.800","gray.900","black"],T=t(38347),F=t(93924),P=t(83986),Z=t(48931),H=t(67546),B=t(93441),A=t(6569),V=t(24189),M=t(2827),W=t(48420),X=t(96699),_=t(40155),U=t(56769),G=t(336),q=t(72026),Q=t(94096),K=t(64115),J=t(88134),Y=t(48235),$=t(67273),ee=t(15267),ne=t(46049),te=t(95818),re=t(47647),ie=t(86658),oe=t(29356);function le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?le(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ae=function(e){var n=e.physics,t=e.setPhysics,r=e.threeDim,i=e.setThreeDim,o=e.filter,a=e.setFilter,d=e.visuals,h=e.setVisuals,g=e.mouse,f=e.setMouse,x=e.behavior,p=e.setBehavior,j=e.tags,m=e.tagColors,b=e.setTagColors,C=(0,u.useState)(!0),y=C[0],k=C[1],w=(0,u.useContext)(oe.N),S=w.highlightColor,O=w.setHighlightColor;return y?(0,l.jsxs)(v.xu,{bg:"alt.100",w:"xs",marginTop:10,marginLeft:10,borderRadius:"xl",paddingBottom:5,zIndex:300,position:"relative",boxShadow:"xl",maxH:.92*globalThis.innerHeight,children:[(0,l.jsxs)(v.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:2,paddingTop:1,children:[(0,l.jsx)(X.u,{label:"2D",children:(0,l.jsx)(_.z,{onClick:function(){return i(!r)},variant:"ghost",zIndex:"overlay",children:r?"3D":"2D"})}),(0,l.jsxs)(v.xu,{display:"flex",alignItems:"center",children:[(0,l.jsx)(X.u,{label:"Reset settings to defaults",children:(0,l.jsx)(W.h,{"aria-label":"Reset Defaults",icon:(0,l.jsx)(P.A,{}),onClick:function(){h(z),a(N),f(R),t(I),p(D)},variant:"none",size:"sm"})}),(0,l.jsx)(W.h,{size:"sm",icon:(0,l.jsx)(Z.T,{}),"aria-label":"Close Tweak Panel",variant:"ghost",onClick:function(){return k(!1)}})]})]}),(0,l.jsx)(ie.ZP,{autoHeight:!0,autoHeightMax:.85*globalThis.innerHeight,autoHide:!0,renderThumbVertical:function(e){var n=e.style,t=(0,T.Z)(e,["style"]);return(0,l.jsx)(v.xu,se(se({},t),{},{style:se(se({},n),{},{borderRadius:10}),bg:S}))},children:(0,l.jsxs)(U.UQ,{allowMultiple:!0,allowToggle:!0,color:"black",children:[(0,l.jsxs)(U.Qd,{children:[(0,l.jsxs)(U.KF,{children:[(0,l.jsx)(U.XE,{marginRight:2}),(0,l.jsx)(G.X,{size:"sm",children:"Filter"})]}),(0,l.jsxs)(U.Hk,{children:[(0,l.jsxs)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,l.jsxs)(Q.k,{justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Orphans"}),(0,l.jsx)(J.r,{onChange:function(){a(se(se({},o),{},{orphans:!o.orphans}))},isChecked:o.orphans})]}),(0,l.jsxs)(Q.k,{justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Link nodes with parent file"}),(0,l.jsx)(J.r,{onChange:function(){a(se(se({},o),{},{parents:!o.parents}))},isChecked:o.parents})]}),(0,l.jsxs)(Q.k,{justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Citations without note files"}),(0,l.jsx)(J.r,{onChange:function(){a(se(se({},o),{},{filelessCites:!o.filelessCites}))},isChecked:o.filelessCites})]}),(0,l.jsxs)(Q.k,{justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Non-existant nodes"}),(0,l.jsx)(J.r,{onChange:function(){b(se(se({},m),{},{bad:"white"})),a(se(se({},o),{},{bad:!o.bad}))},isChecked:o.bad})]})]}),(0,l.jsxs)(U.UQ,{padding:0,allowToggle:!0,allowMultiple:!0,paddingLeft:3,children:[(0,l.jsxs)(U.Qd,{children:[(0,l.jsxs)(U.KF,{children:["Tag filters",(0,l.jsx)(U.XE,{})]}),(0,l.jsxs)(U.Hk,{pr:0,mr:0,children:[(0,l.jsx)(ge,{highlightColor:S,filter:o,setFilter:a,tags:j,mode:"blacklist"}),(0,l.jsx)(ge,{highlightColor:S,filter:o,setFilter:a,tags:j,mode:"whitelist"})]})]}),(0,l.jsxs)(U.Qd,{children:[(0,l.jsxs)(U.KF,{children:["Tag Colors",(0,l.jsx)(U.XE,{})]}),(0,l.jsx)(U.Hk,{pr:0,mr:0,children:(0,l.jsx)(fe,{tags:j,colorList:E,tagColors:m,setTagColors:b,highlightColor:S})})]})]})]})]}),(0,l.jsxs)(U.Qd,{children:[(0,l.jsx)(U.KF,{display:"flex",justifyContent:"space-between",children:(0,l.jsxs)(v.xu,{display:"flex",children:[(0,l.jsx)(U.XE,{marginRight:2}),(0,l.jsx)(G.X,{size:"sm",children:"Physics"})]})}),(0,l.jsxs)(U.Hk,{children:[(0,l.jsxs)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,l.jsx)(de,{label:"Gravity",value:n.gravityOn,onChange:function(){return t(se(se({},n),{},{gravityOn:!n.gravityOn}))},children:(0,l.jsx)(ue,{label:"Strength",value:10*n.gravity,onChange:function(e){return t(se(se({},n),{},{gravity:e/10}))}})}),(0,l.jsx)(ue,{value:-n.charge/100,onChange:function(e){return t(se(se({},n),{},{charge:-100*e}))},label:"Repulsive Force"}),(0,l.jsx)(de,{label:"Collision",infoText:"Perfomance sap, disable if slow",value:n.collision,onChange:function(){return t(se(se({},n),{},{collision:!n.collision}))},children:(0,l.jsx)(ue,{value:n.collisionStrength/5,onChange:function(e){return t(se(se({},n),{},{collisionStrength:5*e}))},label:"Collision Radius",infoText:"Easy with this one, high values can lead to a real jiggly mess"})}),(0,l.jsx)(ue,{value:5*n.linkStrength,onChange:function(e){return t(se(se({},n),{},{linkStrength:e/5}))},label:"Link Force"}),(0,l.jsx)(ue,{label:"Link Iterations",value:n.linkIts,onChange:function(e){return t(se(se({},n),{},{linkIts:e}))},min:0,max:6,step:1,infoText:"How many links down the line the physics of a single node affects (Slow)"}),(0,l.jsx)(ue,{label:"Viscosity",value:10*n.velocityDecay,onChange:function(e){return t(se(se({},n),{},{velocityDecay:e/10}))}})]}),(0,l.jsx)(v.xu,{children:(0,l.jsx)(U.UQ,{paddingLeft:3,allowToggle:!0,children:(0,l.jsxs)(U.Qd,{children:[(0,l.jsxs)(U.KF,{children:[(0,l.jsx)(K.x,{children:"Advanced"}),(0,l.jsx)(U.XE,{marginRight:2})]}),(0,l.jsx)(U.Hk,{children:(0,l.jsxs)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:3,color:"gray.800",children:[(0,l.jsx)(ue,{label:"Stabilization rate",value:50*n.alphaDecay,onChange:function(e){return t(se(se({},n),{},{alphaDecay:e/50}))}}),(0,l.jsx)(de,{label:"Center nodes",value:n.centering,onChange:function(){return t(se(se({},n),{},{centering:!n.centering}))},infoText:"Keeps the nodes in the center of the viewport. If disabled you can drag the nodes anywhere you want.",children:(0,l.jsx)(ue,{label:"Centering Strength",value:n.centeringStrength,max:2,step:.01,onChange:function(e){return t(se(se({},n),{},{centeringStrength:e}))}})})]})})]})})})]})]}),(0,l.jsxs)(U.Qd,{children:[(0,l.jsxs)(U.KF,{children:[(0,l.jsx)(U.XE,{marginRight:2}),(0,l.jsx)(G.X,{size:"sm",children:"Visual"})]}),(0,l.jsx)(U.Hk,{children:(0,l.jsxs)(q.gC,{justifyContent:"flex-start",align:"stretch",children:[(0,l.jsx)(U.UQ,{allowToggle:!0,defaultIndex:[0],paddingLeft:3,children:(0,l.jsxs)(U.Qd,{children:[(0,l.jsx)(U.KF,{children:(0,l.jsxs)(Q.k,{justifyContent:"space-between",w:"100%",children:[(0,l.jsx)(K.x,{children:"Colors"}),(0,l.jsx)(U.XE,{marginRight:2})]})}),(0,l.jsx)(U.Hk,{children:(0,l.jsx)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,l.jsxs)(v.xu,{children:[(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Nodes"}),(0,l.jsx)(X.u,{label:"Shuffle node colors",children:(0,l.jsx)(W.h,{"aria-label":"Shuffle node colors",size:"sm",icon:(0,l.jsx)(H.n,{}),variant:"ghost",onClick:function(){var e,n=null!==(e=d.nodeColorScheme)&&void 0!==e?e:[];h(se(se({},d),{},{nodeColorScheme:n.map((function(e){return[Math.random(),e]})).sort((function(e,n){return(0,c.Z)(e,1)[0]-(0,c.Z)(n,1)[0]})).map((function(e){var n=(0,c.Z)(e,2);n[0];return n[1]}))}))}})}),(0,l.jsx)(X.u,{label:"Cycle node colors",children:(0,l.jsx)(W.h,{"aria-label":"Shift node colors",icon:(0,l.jsx)(B.L,{}),size:"sm",variant:"ghost",onClick:function(){var e,n=null!==(e=d.nodeColorScheme)&&void 0!==e?e:[];h(se(se({},d),{},{nodeColorScheme:[].concat((0,s.Z)(n.slice(1,n.length)),[n[0]])}))}})}),(0,l.jsxs)(Y.v2,{placement:"right",closeOnSelect:!1,matchWidth:!0,children:[(0,l.jsx)(Y.j2,{width:20,as:_.z,colorScheme:"",color:"black",rightIcon:(0,l.jsx)(A.v,{}),children:(0,l.jsx)(Q.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:d.nodeColorScheme.map((function(e){return(0,l.jsx)(v.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsx)(Y.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:(0,l.jsx)(Y.__,{width:500,type:"checkbox",defaultValue:d.nodeColorScheme,onChange:function(e){e.length&&h(se(se({},d),{},{nodeColorScheme:e}))},children:E.map((function(e){return(0,l.jsx)(Y.ii,{isChecked:d.nodeColorScheme.some((function(n){return n===e})),value:e,isDisabled:1===d.nodeColorScheme.length&&d.nodeColorScheme[0]===e,children:(0,l.jsx)(v.xu,{justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(v.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})})},e)}))})})]})]})]}),(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Links"}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,colorScheme:"",color:"black",rightIcon:(0,l.jsx)(A.v,{}),children:(0,l.jsx)(v.xu,{children:d.linkColorScheme?(0,l.jsx)(v.xu,{bgColor:d.linkColorScheme,borderRadius:"sm",height:6,width:6}):(0,l.jsx)(Q.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:d.nodeColorScheme.map((function(e){return(0,l.jsx)(v.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsxs)(Y.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,l.jsx)(Y.sN,{onClick:function(){return h(se(se({},d),{},{linkColorScheme:""}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(Q.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:d.nodeColorScheme.map((function(e){return(0,l.jsx)(v.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e)}))})}),E.map((function(e){return(0,l.jsx)(Y.sN,{onClick:function(){return h(se(se({},d),{},{linkColorScheme:e}))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(v.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))]})]})]})]}),(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Accent"}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,colorScheme:"",color:"black",rightIcon:(0,l.jsx)(A.v,{}),children:(0,l.jsx)(v.xu,{bgColor:S,borderRadius:"sm",height:6,width:6})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsx)(Y.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:E.map((function(e){return(0,l.jsx)(Y.sN,{onClick:function(){return O(e)},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(v.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))})]})]})]}),(0,l.jsx)(he,{colorList:E,label:"Link highlight",visuals:d,setVisuals:h,value:"linkHighlight",visValue:d.linkHighlight}),(0,l.jsx)(he,{colorList:E,label:"Node highlight",visuals:d,setVisuals:h,value:"nodeHighlight",visValue:d.nodeHighlight}),(0,l.jsx)(he,{colorList:E,label:"Background",visuals:d,setVisuals:h,value:"backgroundColor",visValue:d.backgroundColor}),(0,l.jsx)(he,{colorList:E,label:"Emacs node",visuals:d,setVisuals:h,value:"emacsNodeColor",visValue:d.emacsNodeColor})]})})})]})}),(0,l.jsxs)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,l.jsx)(ue,{label:"Node size",value:d.nodeRel,onChange:function(e){return h(se(se({},d),{},{nodeRel:e}))}}),(0,l.jsx)(ue,{label:"Node connections size scale",value:d.nodeSizeLinks,min:0,max:2,onChange:function(e){return h(se(se({},d),{},{nodeSizeLinks:e}))}}),r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ue,{label:"Node opacity",value:d.nodeOpacity,min:0,max:1,onChange:function(e){return h(se(se({},d),{},{nodeOpacity:e}))}}),(0,l.jsx)(ue,{label:"Node resolution",value:d.nodeResolution,min:5,max:32,step:1,onChange:function(e){return h(se(se({},d),{},{nodeResolution:e}))}})]}),(0,l.jsx)(ue,{label:"Link width",value:d.linkWidth,onChange:function(e){return h(se(se({},d),{},{linkWidth:e}))}}),r&&(0,l.jsx)(ue,{label:"Link opacity",min:0,max:1,value:d.linkOpacity,onChange:function(e){return h(se(se({},d),{},{linkOpacity:e}))}}),(0,l.jsxs)(de,{label:"Dash cite links",infoText:"Add dashes to citation links made with org-roam-bibtex",value:d.citeDashes,onChange:function(){return h(se(se({},d),{},{citeDashes:!d.citeDashes}))},children:[(0,l.jsx)(ue,{label:"Dash length",value:d.citeDashLength/10,onChange:function(e){return h(se(se({},d),{},{citeDashLength:10*e}))}}),(0,l.jsx)(ue,{label:"Gap length",value:d.citeGapLength/5,onChange:function(e){return h(se(se({},d),{},{citeGapLength:5*e}))}})]}),(0,l.jsx)(he,{colorList:E,label:"Citation node color",visuals:d,setVisuals:h,value:"citeNodeColor",visValue:d.citeNodeColor}),(0,l.jsx)(he,{colorList:E,label:"Citation link color",visuals:d,setVisuals:h,value:"citeLinkColor",visValue:d.citeLinkColor}),(0,l.jsx)(he,{colorList:E,label:"Reference link highlight",visuals:d,setVisuals:h,value:"citeLinkHighlightColor",visValue:d.citeLinkHighlightColor}),(0,l.jsxs)(de,{label:"Dash ref links",infoText:"Add dashes to citation links, whose target has a note, made with org-roam-bibtex",value:d.refDashes,onChange:function(){return h(se(se({},d),{},{refDashes:!d.refDashes}))},children:[(0,l.jsx)(ue,{label:"Dash length",value:d.refDashLength/10,onChange:function(e){return h(se(se({},d),{},{refDashLength:10*e}))}}),(0,l.jsx)(ue,{label:"Gap length",value:d.refGapLength/5,onChange:function(e){return h(se(se({},d),{},{refGapLength:5*e}))}})]}),(0,l.jsx)(he,{colorList:E,label:"Reference node color",visuals:d,setVisuals:h,value:"refNodeColor",visValue:d.refNodeColor}),(0,l.jsx)(he,{colorList:E,label:"Reference link color",visuals:d,setVisuals:h,value:"refLinkColor",visValue:d.refLinkColor}),(0,l.jsx)(he,{colorList:E,label:"Reference link highlight",visuals:d,setVisuals:h,value:"refLinkHighlightColor",visValue:d.refLinkHighlightColor}),(0,l.jsxs)(v.xu,{children:[(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Labels"}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,colorScheme:"",color:"black",rightIcon:(0,l.jsx)(A.v,{}),children:d.labels?d.labels<2?"On Highlight":"Always":"Never"}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsxs)(Y.qy,{zIndex:"popover",bgColor:"gray.200",children:[(0,l.jsx)(Y.sN,{onClick:function(){return h(se(se({},d),{},{labels:0}))},children:"Never"}),(0,l.jsx)(Y.sN,{onClick:function(){return h(se(se({},d),{},{labels:1}))},children:"On Highlight"}),(0,l.jsx)(Y.sN,{onClick:function(){return h(se(se({},d),{},{labels:2}))},children:"Always"}),(0,l.jsx)(Y.sN,{onClick:function(){return h(se(se({},d),{},{labels:3}))},children:"Always (even in 3D)"})]})]})]})]}),(0,l.jsx)(ee.U,{in:d.labels>0,animateOpacity:!0,children:(0,l.jsxs)(q.gC,{spacing:1,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.400"}),align:"stretch",paddingLeft:2,color:"gray.800",children:[(0,l.jsx)(ue,{label:"Label font size",value:d.labelFontSize,min:5,max:20,step:.5,onChange:function(e){return h(se(se({},d),{},{labelFontSize:e}))}}),(0,l.jsx)(ue,{label:"Maximum label characters",value:d.labelLength,min:10,max:100,step:1,onChange:function(e){return h(se(se({},d),{},{labelLength:e}))}}),(0,l.jsx)(he,{colorList:E,label:"Text",visuals:d,setVisuals:h,value:"labelTextColor",visValue:d.labelTextColor}),(0,l.jsx)(he,{colorList:E,label:"Background",visuals:d,setVisuals:h,value:"labelBackgroundColor",visValue:d.labelBackgroundColor}),(0,l.jsx)(ee.U,{in:!!d.labelBackgroundColor,animateOpacity:!0,children:(0,l.jsx)(v.xu,{paddingTop:2,children:(0,l.jsx)(ue,{label:"Background opacity",value:d.labelBackgroundOpacity,onChange:function(e){console.log(d.labelBackgroundOpacity),h(se(se({},d),{},{labelBackgroundOpacity:e}))},min:0,max:1,step:.01})})}),(0,l.jsx)(ee.U,{in:d.labels>1,animateOpacity:!0,children:(0,l.jsx)(v.xu,{paddingTop:2,children:(0,l.jsx)(ue,{label:"Label Appearance Scale",value:5*d.labelScale,onChange:function(e){return h(se(se({},d),{},{labelScale:e/5}))}})})})]})})]}),(0,l.jsxs)(de,{label:"Link arrows",value:d.arrows,onChange:function(){return h(se(se({},d),{},{arrows:!d.arrows}))},children:[(0,l.jsx)(ue,{label:"Arrow size",value:d.arrowsLength/10,onChange:function(e){return h(se(se({},d),{},{arrowsLength:10*e}))}}),(0,l.jsx)(ue,{label:"Arrow Position",value:d.arrowsPos,min:0,max:1,step:.01,onChange:function(e){return h(se(se({},d),{},{arrowsPos:e}))}}),(0,l.jsx)(he,{colorList:E,label:"Arrow Color",visuals:d,setVisuals:h,value:"arrowsColor",visValue:d.arrowsColor})]}),(0,l.jsxs)(de,{label:"Directional Particles",value:d.particles,onChange:function(){return h(se(se({},d),{},{particles:!d.particles}))},children:[(0,l.jsx)(ue,{label:"Particle Number",value:d.particlesNumber,max:5,step:1,onChange:function(e){return h(se(se({},d),{},{particlesNumber:e}))}}),(0,l.jsx)(ue,{label:"Particle Size",value:d.particlesWidth,onChange:function(e){return h(se(se({},d),{},{particlesWidth:e}))}})]}),(0,l.jsx)(de,{label:"Highlight",onChange:function(){return h(se(se({},d),{},{highlight:!d.highlight}))},value:d.highlight,children:(0,l.jsxs)(q.gC,{spacing:1,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.400"}),align:"stretch",paddingLeft:0,children:[(0,l.jsx)(ue,{label:"Highlight Link Thickness",value:d.highlightLinkSize,onChange:function(e){return h(se(se({},d),{},{highlightLinkSize:e}))}}),(0,l.jsx)(ue,{label:"Highlight Node Size",value:d.highlightNodeSize,onChange:function(e){return h(se(se({},d),{},{highlightNodeSize:e}))}}),(0,l.jsx)(ue,{min:0,max:1,label:"Highlight Fade",value:d.highlightFade,onChange:function(e){return h(se(se({},d),{},{highlightFade:e}))}}),(0,l.jsxs)(de,{label:"Highlight Animation",onChange:function(){h(se(se({},d),{},{highlightAnim:!d.highlightAnim}))},value:d.highlightAnim,children:[(0,l.jsx)(ue,{label:"Animation speed",onChange:function(e){return h(se(se({},d),{},{animationSpeed:e}))},value:d.animationSpeed,infoText:"Slower speed has a chance of being buggy",min:50,max:1e3,step:10}),(0,l.jsx)(ne.Ph,{placeholder:d.algorithmName,onChange:function(e){h(se(se({},d),{},{algorithmName:e.target.value}))},children:d.algorithmOptions.map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))})]})]})})]})]})})]}),(0,l.jsxs)(U.Qd,{children:[(0,l.jsxs)(U.KF,{children:[(0,l.jsx)(U.XE,{marginRight:2}),(0,l.jsx)(G.X,{size:"sm",children:"Behavior"})]}),(0,l.jsx)(U.Hk,{children:(0,l.jsxs)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsxs)(Q.k,{children:[(0,l.jsx)(K.x,{children:"Expand Node"}),(0,l.jsx)(ce,{infoText:"View only the node and its direct neighbors"})]}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,rightIcon:(0,l.jsx)(A.v,{}),colorScheme:"",color:"black",children:(0,l.jsx)(K.x,{children:g.local?g.local[0].toUpperCase()+g.local.slice(1):"Never"})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsxs)(Y.qy,{zIndex:"popover",bgColor:"gray.200",children:[(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{local:""}))},children:"Never"}),(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{local:"click"}))},children:"Click"}),(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{local:"double"}))},children:"Double Click"}),(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{local:"right"}))},children:"Right Click"})]})]})]})]}),(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Open in Emacs"}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,rightIcon:(0,l.jsx)(A.v,{}),colorScheme:"",color:"black",children:(0,l.jsx)(K.x,{children:g.follow?g.follow[0].toUpperCase()+g.follow.slice(1):"Never"})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsxs)(Y.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{follow:""}))},children:"Never"}),(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{follow:"click"}))},children:"Click"}),(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{follow:"double"}))},children:"Double Click"}),(0,l.jsx)(Y.sN,{onClick:function(){return f(se(se({},g),{},{follow:"right"}))},children:"Right Click"})]})]})]})]}),(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:"Follow Emacs by..."}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,rightIcon:(0,l.jsx)(A.v,{}),colorScheme:"",color:"black",children:(0,l.jsx)(K.x,{children:x.follow[0].toUpperCase()+x.follow.slice(1)})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsxs)(Y.qy,{bgColor:"gray.200",zIndex:"popover",children:[(0,l.jsx)(Y.sN,{onClick:function(){return p(se(se({},x),{},{follow:"color"}))},children:"Just coloring the currently opened node"}),(0,l.jsx)(Y.sN,{onClick:function(){return p(se(se({},x),{},{follow:"local"}))},children:"Opening the local graph"}),(0,l.jsx)(Y.sN,{onClick:function(){return p(se(se({},x),{},{follow:"zoom"}))},children:"Zooming to the current node"})]})]})]})]}),(0,l.jsx)(ue,{label:"Zoom speed",value:x.zoomSpeed,min:0,max:4e3,step:100,onChange:function(e){return p(se(se({},x),{},{zoomSpeed:e}))}}),(0,l.jsx)(ue,{label:"Zoom padding",value:x.zoomPadding,min:0,max:400,step:1,onChange:function(e){return p(se(se({},x),{},{zoomPadding:e}))},infoText:"How much to zoom out to accomodate all nodes when changing the view."})]})})]})]})})]}):(0,l.jsx)(v.xu,{position:"absolute",zIndex:"overlay",marginTop:10,marginLeft:10,display:y?"none":"block",children:(0,l.jsx)(W.h,{variant:"ghost","aria-label":"Settings",icon:(0,l.jsx)(F.e,{}),onClick:function(){return k(!0)}})})},ce=function(e){var n=e.infoText;return(0,l.jsx)(v.xu,{paddingLeft:"1",children:(0,l.jsx)(X.u,{label:n,placement:"top",color:"gray.100",bg:"gray.800",hasArrow:!0,children:(0,l.jsx)(V.h,{})})})},ue=function(e){var n=e.min,t=void 0===n?0:n,r=e.max,i=void 0===r?10:r,o=e.step,s=void 0===o?.1:o,a=e.value,c=void 0===a?1:a,d=(0,T.Z)(e,["min","max","step","value"]),h=d.onChange,g=d.label,f=d.infoText,x=(0,u.useContext)(oe.N).highlightColor;return(0,l.jsxs)(v.xu,{children:[(0,l.jsxs)(v.xu,{display:"flex",alignItems:"flex-end",children:[(0,l.jsx)(K.x,{children:g}),f&&(0,l.jsx)(ce,{infoText:f})]}),(0,l.jsxs)(te.iR,{value:c,onChange:h,min:t,max:i,step:s,children:[(0,l.jsx)(te.Uj,{children:(0,l.jsx)(te.Ms,{})}),(0,l.jsx)(X.u,{bg:x,label:c.toFixed(1),children:(0,l.jsx)(te.gs,{bg:"white"})})]})]})},de=function(e){var n=e.value,t=e.onChange,r=e.label,i=e.infoText,o=e.children;return(0,l.jsxs)(v.xu,{paddingTop:2,children:[(0,l.jsxs)(v.xu,{display:"flex",justifyContent:"space-between",paddingBottom:2,children:[(0,l.jsxs)(v.xu,{display:"flex",alignItems:"center",children:[(0,l.jsx)(K.x,{children:r}),i&&(0,l.jsx)(ce,{infoText:i})]}),(0,l.jsx)(J.r,{isChecked:!!n,onChange:t})]}),(0,l.jsx)(ee.U,{in:!!n,animateOpacity:!0,children:(0,l.jsx)(v.xu,{paddingLeft:4,paddingTop:2,paddingBottom:2,children:o})})]})},he=function(e){var n=e.label,t=e.colorList,r=e.value,i=e.visuals,o=e.visValue,s=e.setVisuals;return(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(K.x,{children:n}),(0,l.jsxs)(Y.v2,{placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,colorScheme:"",color:"black",rightIcon:(0,l.jsx)(A.v,{}),children:(0,l.jsx)(v.xu,{bgColor:o,borderRadius:"sm",height:6,width:6})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsxs)(Y.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,l.jsx)(Y.sN,{onClick:function(){return s(se(se({},i),{},(0,a.Z)({},r,"")))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(v.xu,{height:6,width:6})}),t.map((function(e){return(0,l.jsx)(Y.sN,{onClick:function(){return s(se(se({},i),{},(0,a.Z)({},r,e)))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(v.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e)}))]})]})]})]})},ge=function(e){var n=e.filter,t=e.setFilter,r=e.tags,i=e.highlightColor,o=e.mode,s=r.map((function(e){return{value:e,label:e}})),c="blacklist"===o?"tagsBlacklist":"tagsWhitelist",d=(0,u.useState)(n[c].map((function(e){return{value:e,label:e}}))),h=d[0],g=d[1];return(0,l.jsx)(re.CUIAutoComplete,{items:s,label:"Add tag to "+o,placeholder:" ",onCreateItem:function(e){return null},disableCreateItem:!0,selectedItems:h,onSelectedItemsChange:function(e){e.selectedItems&&(g(e.selectedItems),t(se(se({},n),{},(0,a.Z)({},c,e.selectedItems.map((function(e){return e.value}))))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{focusBorderColor:i,color:"gray.800",borderColor:"gray.600"},tagStyleProps:{rounded:"full",bg:i,height:8,paddingLeft:4,fontWeight:"bold"},hideToggleButton:!0,itemRenderer:function(e){return e.label}})},fe=function(e){var n=e.colorList,t=e.tagColors,r=e.setTagColors,i=e.highlightColor,o=e.tags.map((function(e){return{value:e,label:e}})),s=(0,u.useState)(Object.keys(t).map((function(e){return{value:e,label:e}}))),c=s[0],d=s[1];return(0,l.jsxs)(v.xu,{children:[(0,l.jsx)(re.CUIAutoComplete,{items:o,label:"Add tag to filter",placeholder:" ",disableCreateItem:!0,selectedItems:c,onSelectedItemsChange:function(e){e.selectedItems&&(d(Array.from(new Set(e.selectedItems))),r(Object.fromEntries(Array.from(new Set(e.selectedItems)).map((function(e){var n;return[e.label,null!==(n=t[e.label])&&void 0!==n?n:"gray.600"]})))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{focusBorderColor:i,color:"gray.800",borderColor:"gray.600"},tagStyleProps:{display:"none",rounded:"full",bg:i,height:8,paddingLeft:4,fontWeight:"bold"},hideToggleButton:!0,itemRenderer:function(e){return e.label}}),(0,l.jsx)(q.gC,{spacing:2,justifyContent:"flex-start",divider:(0,l.jsx)(q.cX,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:Object.keys(t).map((function(e){return(0,l.jsxs)(Q.k,{alignItems:"center",justifyContent:"space-between",width:"100%",pl:2,children:[(0,l.jsx)(v.xu,{width:"100%",children:(0,l.jsx)(K.x,{fontWeight:"bold",children:e})}),(0,l.jsxs)(Y.v2,{isLazy:!0,placement:"right",children:[(0,l.jsx)(Y.j2,{as:_.z,colorScheme:"",color:"black",children:(0,l.jsx)(v.xu,{bgColor:t[e],borderRadius:"sm",height:6,width:6})}),(0,l.jsxs)($.h,{children:[" ",(0,l.jsx)(Y.qy,{minW:10,zIndex:"popover",bgColor:"gray.200",children:n.map((function(n){return(0,l.jsx)(Y.sN,{onClick:function(){return r(se(se({},t),{},(0,a.Z)({},e,n)))},justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,l.jsx)(v.xu,{bgColor:n,borderRadius:"sm",height:6,width:6})},n)}))})]})]}),(0,l.jsx)(W.h,{"aria-label":"Delete tag color",variant:"ghost",icon:(0,l.jsx)(M.p,{}),onClick:function(){r(Object.fromEntries(Array.from(new Set(c)).map((function(e){var n;return[e.label,null!==(n=t[e.label])&&void 0!==n?n:"gray.600"]})))),d(c.filter((function(n){return n.value!==e})))}})]},e)}))})]})},xe=t(49065),pe=t(94030),je=t(55830),me=t(46617),ve=t(50862),be=t(68928),Ce=function(e){e.background;var n=e.node,t=(e.nodeType,e.coordinates),r=e.handleLocal,i=e.menuClose,o=e.scope,s=e.openNodeInEmacs,a=e.deleteNodeInEmacs,c=e.createNodeInEmacs,d=(0,b.q)(),h=d.isOpen,g=d.onOpen,f=d.onClose;(0,u.useRef)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.xu,{position:"absolute",zIndex:"overlay",left:t[0]+10,top:t[1]-10,padding:5,children:(0,l.jsx)(Y.v2,{closeOnBlur:!1,defaultIsOpen:!0,onClose:function(){return i()},children:(0,l.jsxs)(Y.qy,{zIndex:"overlay",bgColor:"alt.100",borderColor:"gray.500",maxWidth:"xs",children:[n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.X,{size:"sm",isTruncated:!0,px:3,py:1,children:n.title}),(0,l.jsx)(Y.R,{borderColor:"gray.500"})]}),0!==o.nodeIds.length&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Y.sN,{onClick:function(){return r(n,"add")},icon:(0,l.jsx)(pe.I,{}),children:"Expand local graph at node"}),(0,l.jsx)(Y.sN,{onClick:function(){return r(n,"replace")},icon:(0,l.jsx)(je.O,{}),children:"Open local graph for this node"})]}),null!==n&&void 0!==n&&n.properties.FILELESS?(0,l.jsx)(Y.sN,{icon:(0,l.jsx)(ve.d,{}),onClick:function(){return c(n)},children:"Create node"}):(0,l.jsx)(Y.sN,{icon:(0,l.jsx)(me.d,{}),onClick:function(){return s(n)},children:"Open in Emacs"}),(null===n||void 0===n?void 0:n.properties.ROAM_REFS)&&(0,l.jsx)(Y.sN,{icon:(0,l.jsx)(be.h,{}),children:"Open in Zotero"}),0===o.nodeIds.length&&(0,l.jsx)(Y.sN,{icon:(0,l.jsx)(je.O,{}),onClick:function(){return r(n,"replace")},children:"Open local graph"}),0===(null===n||void 0===n?void 0:n.level)&&(0,l.jsx)(Y.sN,{closeOnSelect:!1,icon:(0,l.jsx)(M.p,{color:"red.500"}),color:"red.500",onClick:g,children:"Permenantly delete note"})]})})}),(0,l.jsxs)(xe.u_,{isCentered:!0,isOpen:h,onClose:f,children:[(0,l.jsx)(xe.ZA,{}),(0,l.jsxs)(xe.hz,{zIndex:"popover",children:[(0,l.jsx)(xe.xB,{children:"Delete node?"}),(0,l.jsx)(xe.ol,{}),(0,l.jsx)(xe.fe,{children:(0,l.jsxs)(q.gC,{spacing:4,display:"flex",alignItems:"flex-start",children:[(0,l.jsx)(K.x,{children:"This will permanently delete your note:"}),(0,l.jsx)(K.x,{fontWeight:"bold",children:null===n||void 0===n?void 0:n.title}),0!==(null===n||void 0===n?void 0:n.level)&&(0,l.jsx)(K.x,{children:"This will only delete the from this heading until but not including the next node. Your parent file and all other nodes will not be deleted."}),(0,l.jsx)(K.x,{children:"Are you sure you want to do continue?"})]})}),(0,l.jsxs)(xe.mz,{children:[(0,l.jsx)(_.z,{mr:3,onClick:function(){console.log("closing"),f(),i()},children:"Cancel"}),(0,l.jsx)(_.z,{variant:"link",colorScheme:"red",ml:3,onClick:function(){console.log("aaaaa"),a(n),f(),i()},children:"Delete node"})]})]})]})]})},ye=t(31122),ke=t(22003);function we(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?we(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):we(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Oe=t.e(4).then(t.bind(t,57004)),Le=t.g.window?t(61957).f$:null,Ie=t.g.window?t(61957).s6:null;function Ne(){var e=(0,u.useState)(!1),n=e[0],t=e[1];return(0,u.useEffect)((function(){t(!0)}),[]),n?(0,l.jsx)(De,{}):null}function ze(e){return["object"===typeof e.source?e.source.id:e.source,"object"===typeof e.target?e.target.id:e.target]}function De(){var e=g("physics",I),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=g("filter",N),o=(0,c.Z)(i,2),d=o[0],h=o[1],f=g("visuals",z),x=(0,c.Z)(f,2),p=x[0],j=x[1],m=(0,u.useState)(null),b=m[0],C=m[1],y=(0,u.useState)(null),k=y[0],w=y[1],S=g("behavior",D),O=(0,c.Z)(S,2),L=O[0],E=O[1],T=g("mouse",R),F=(0,c.Z)(T,2),P=F[0],Z=F[1],H=(0,u.useRef)({}),B=(0,u.useRef)({}),A=(0,u.useRef)([]),V=(0,u.useRef)(null),M=(0,u.useRef)({nodes:[],links:[]});(0,u.useEffect)((function(){b&&(M.current=b)}),[b]);var W=(0,u.useContext)(oe.N).setEmacsTheme,X=g("3d",!1),_=(0,c.Z)(X,2),U=_[0],G=_[1],q=g("tagCols",{}),Q=(0,c.Z)(q,2),K=Q[0],J=Q[1],Y=(0,u.useState)({nodeIds:[]}),$=Y[0],ee=Y[1],ne=(0,u.useRef)({nodeIds:[]}),te=(0,u.useRef)(D);te.current=L;var re=(0,u.useRef)(null);ne.current=$;var ie=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;if("color"!==e){var o=V.current,l=ne.current,a=te.current,c=null!==(t=B.current[n])&&void 0!==t?t:[],u=Object.fromEntries([n].concat((0,s.Z)(c.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]})));if("zoom"===e)return console.log(l),l.nodeIds.length&&(console.log("emptying"),console.log("scope "+l.nodeIds),ee({nodeIds:[]})),void setTimeout((function(){return o.zoomToFit(r,i,(function(e){return u[e.id]}))}),50);if(!l.nodeIds.length)return ee({nodeIds:[n]}),void setTimeout((function(){o.centerAt(0,0,r)}),50);if("add"!==a.localSame)return ee({nodeIds:[n]}),void setTimeout((function(){o.centerAt(0,0,r)}),50);if(!l.nodeIds.includes(n)||!l.nodeIds.some((function(e){return u[e]})))return ee({nodeIds:[n]}),void setTimeout((function(){o.centerAt(0,0,r)}),50);ee((function(e){return Se(Se({},e),{},{nodeIds:[].concat((0,s.Z)(e.nodeIds),[n])})})),setTimeout((function(){return o.zoomToFit(r,i,(function(e){return u[e.id]}))}),50)}};return(0,u.useEffect)((function(){re.current=new ke.Z("ws://localhost:35903"),re.current.addEventListener("open",(function(e){console.log("Connection with Emacs established")})),re.current.addEventListener("message",(function(e){V.current;var n=te.current,t=JSON.parse(e.data);switch(t.type){case"graphdata":return function(e){var n,t=M.current,r=H.current;B.current,A.current=null!==(n=e.tags)&&void 0!==n?n:[];var i=e.nodes.reduce((function(e,n){var t;return Se(Se({},e),{},(0,a.Z)({},n.file,[].concat((0,s.Z)(null!==(t=e[n.file])&&void 0!==t?t:[]),[n])))}),{}),o=Object.keys(i).flatMap((function(e){var n,t=null!==(n=i[e])&&void 0!==n?n:[],r=t.find((function(e){return 0===e.level})),o=t.filter((function(e){return 0!==e.level}));return r?o.map((function(e){return{source:e.id,target:r.id,type:"parent"}})):[]}));H.current=Object.fromEntries(e.nodes.map((function(e){return[e.id,e]})));var l=[].concat((0,s.Z)(e.links),(0,s.Z)(o)),u=[],d=l.map((function(e){var n=e.source,t=e.target;return H.current[n]?H.current[t]?e:(u.push({id:t,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:t,level:0}),Se(Se({},e),{},{type:"bad"})):(u.push({id:n,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:n,level:0}),Se(Se({},e),{},{type:"bad"}))}));H.current=Se(Se({},H.current),Object.fromEntries(u.map((function(e){return[e.id,e]})))),B.current=d.reduce((function(e,n){var t,r,i;return Se(Se({},e),{},(i={},(0,a.Z)(i,n.source,[].concat((0,s.Z)(null!==(t=e[n.source])&&void 0!==t?t:[]),[n])),(0,a.Z)(i,n.target,[].concat((0,s.Z)(null!==(r=e[n.target])&&void 0!==r?r:[]),[n])),i))}),{});var h={nodes:[].concat((0,s.Z)(e.nodes),u),links:d};if(!t.nodes.length){var g=JSON.parse(JSON.stringify(h));return console.log(g),M.current=g,void C(g)}var f=[].concat((0,s.Z)(t.nodes.map((function(e){var n,t=null!==(n=H.current[null===e||void 0===e?void 0:e.id])&&void 0!==n&&n;if(t)return Se(Se({},e),t)}))),(0,s.Z)(Object.keys(H.current).filter((function(e){return!r[e]})).map((function(e){return console.log(e),H.current[e]})))),x=f.reduce((function(e,n,t){var r=null===n||void 0===n?void 0:n.id;return Se(Se({},e),{},(0,a.Z)({},r,t))}),{});console.log(f),console.log(x);var p=d.map((function(e){var n=ze(e),t=(0,c.Z)(n,2),r=t[0],i=t[1];return Se(Se({},e),{},{source:f[x[r]],target:f[x[i]]})}));V.current,C({nodes:f,links:p})}(t.data);case"theme":return W(t.data);case"command":switch(t.data.commandName){case"local":var r=L.zoomSpeed,i=L.zoomPadding;ie("local",t.data.id,r,i),w(t.data.id);break;case"zoom":var o,l,u=(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.speed)||n.zoomSpeed,d=(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.padding)||n.zoomPadding;ie("zoom",t.data.id,u,d),w(t.data.id);break;case"follow":ie(n.follow,t.data.id,n.zoomSpeed,n.zoomPadding),w(t.data.id);break;default:return console.error("unknown message type",t.type)}}}))}),[]),b?(0,l.jsxs)(v.xu,{display:"flex",alignItems:"flex-start",flexDirection:"row",height:"100%",overflow:"hidden",children:[(0,l.jsx)(ae,Se(Se({},{physics:t,setPhysics:r,threeDim:U,setThreeDim:G,filter:d,setFilter:h,visuals:p,setVisuals:j,mouse:P,setMouse:Z,behavior:L,setBehavior:E,tagColors:K,setTagColors:J}),{},{tags:A.current})),(0,l.jsx)(v.xu,{position:"absolute",alignItems:"top",overflow:"hidden",children:(0,l.jsx)(Re,Se({ref:V,nodeById:H.current,linksByNodeId:B.current,webSocket:re.current},{physics:t,graphData:b,threeDim:U,emacsNodeId:k,filter:d,visuals:p,behavior:L,mouse:P,scope:$,setScope:ee,tagColors:K}))})]}):null}var Re=(0,u.forwardRef)((function(e,n){var t=e.physics,r=e.graphData,d=e.threeDim,h=e.linksByNodeId,g=e.filter,f=e.emacsNodeId,C=e.nodeById,y=e.visuals,k=e.behavior,w=e.mouse,S=e.scope,O=e.setScope,I=e.webSocket,N=e.tagColors,z=(0,p.iP)(),D=(0,c.Z)(z,2),R=D[0],T=D[1],F=(0,u.useState)(null),P=F[0],Z=F[1],H=(0,m.useTheme)(),B=(0,u.useContext)(oe.N).emacsTheme,A=function(e,n){S.nodeIds.includes(e.id)||O("replace"!==n?function(n){return Se(Se({},n),{},{nodeIds:[].concat((0,s.Z)(n.nodeIds),[e.id])})}:{nodeIds:[e.id]})},V=function(e,n){I.send(JSON.stringify({command:e,data:n}))},M=function(e){V("open",{id:e.id})},W=function(e,n){switch(e){case w.local:A(n,k.localSame);break;case w.follow:M(n)}},X=(0,u.useRef)(null);(0,u.useEffect)((function(){f&&Z(C[f])}),[f]),X.current=P;var _=(0,u.useMemo)((function(){if(!X.current)return{};var e=h[X.current.id];return e?Object.fromEntries([X.current.id].concat((0,s.Z)(e.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]}))):{}}),[X.current,h]),U=(0,u.useRef)({}),G=((0,u.useRef)({}),(0,u.useMemo)((function(){var e;U.current={};var n=null===r||void 0===r||null===(e=r.nodes)||void 0===e?void 0:e.filter((function(e){if(e){var n=e;return g.tagsBlacklist.length&&g.tagsBlacklist.some((function(e){return n.tags.indexOf(e)>-1}))||g.tagsWhitelist.length>0&&!g.tagsWhitelist.some((function(e){return n.tags.indexOf(e)>-1}))||g.filelessCites&&n.properties.FILELESS?(U.current=Se(Se({},U.current),{},(0,a.Z)({},n.id,n)),!1):!g.bad||!n.properties.bad||(U.current=Se(Se({},U.current),{},(0,a.Z)({},n.id,n)),!1)}})).filter((function(e){var n,t=(null!==(n=h[null===e||void 0===e?void 0:e.id])&&void 0!==n?n:[]).filter((function(e){return!U.current[e.source]&&!U.current[e.target]}));return!g.orphans||(g.parents?0!==t.length:0!==t.length&&t.some((function(e){return!["parent"].includes(e.type)})))})),t=n.map((function(e){return e.id}));return{filteredNodes:n,filteredLinks:r.links.filter((function(e){var n=ze(e),r=(0,c.Z)(n,2),i=r[0],o=r[1];if(g.bad||g.tagsBlacklist.length||g.tagsWhitelist.length||g.filelessCites)return t.includes(i)&&t.includes(o);var l=e;return g.parents||"parent"!==l.type}))}}),[g,r])),q=(0,u.useMemo)((function(){var e=G.filteredNodes.filter((function(e){var n,t=null!==(n=h[e.id])&&void 0!==n?n:[];return S.nodeIds.includes(e.id)||t.some((function(e){return S.nodeIds.includes(e.source)||S.nodeIds.includes(e.target)}))})),n=e.map((function(e){return e.id})),t=G.filteredLinks.filter((function(e){var t=ze(e),r=(0,c.Z)(t,2),i=r[0],o=r[1];return n.includes(i)&&n.includes(o)}));return 0===S.nodeIds.length?{nodes:G.filteredNodes,links:G.filteredLinks}:{nodes:e,links:t}}),[g,S,r]);(0,u.useEffect)((function(){(0,o.Z)(i().mark((function e(){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.current,e.next=3,Oe;case 3:o=e.sent,t.gravityOn?(r.d3Force("x",o.forceX().strength(t.gravity)),r.d3Force("y",o.forceY().strength(t.gravity)),d&&r.d3Force("z",o.forceZ().strength(t.gravity))):(r.d3Force("x",null),r.d3Force("y",null),d&&r.d3Force("z",null)),t.centering?r.d3Force("center",o.forceCenter().strength(t.centeringStrength)):r.d3Force("center",null),t.linkStrength&&r.d3Force("link").strength(t.linkStrength),t.linkIts&&r.d3Force("link").iterations(t.linkIts),t.charge&&r.d3Force("charge").strength(t.charge),r.d3Force("collide",t.collision?o.forceCollide().radius(t.collisionStrength):null);case 10:case"end":return e.stop()}}),e)})))()}),[t]),(0,u.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.d3ReheatSimulation()}),[t]);var Q=(0,u.useRef)(0),K=(0,u.useState)(1),J=K[0],Y=K[1],$=(0,j._7)((function(e){return Y(e)}),{duration:y.animationSpeed,algorithm:L[y.algorithmName]}),ee=(0,c.Z)($,2),ne=ee[0],te=ee[1],re=(0,j._7)((function(e){return Y(Math.min(J,-1*(e-1)))}),{duration:y.animationSpeed,algorithm:L[y.algorithmName]}),ie=(0,c.Z)(re,2),le=ie[0],se=ie[1],ae=(0,u.useRef)(null);(0,u.useEffect)((function(){if(P&&(ae.current=P),!y.highlightAnim)return Y(P?1:0);P?ne():(te(),J>.5?le():Y(0))}),[P]);var ce=function(e){if(H)return e.split(".").reduce((function(e,n){return e[n]}),H.colors)},ue=(0,u.useMemo)((function(){return Object.fromEntries(E.map((function(e){var n=ce(e),t=E.map((function(e){return[e,x.Z(n,ce(e))]}));return[e,Object.fromEntries(t)]})))}),[B]),de=(0,u.useMemo)((function(){var e,n,t,r=null!==(e=h[null===(n=ae.current)||void 0===n?void 0:n.id])&&void 0!==e?e:[];return Object.fromEntries([null===(t=ae.current)||void 0===t?void 0:t.id].concat((0,s.Z)(r.flatMap((function(e){return[e.source,e.target]})))).map((function(e){return[e,{}]})))}),[JSON.stringify(P),ae.current]),he=function(e){var n,t,r,i,o,l,s=null!==(n=null===(t=h[e])||void 0===t?void 0:t.length)&&void 0!==n?n:0,a=s?null===(r=h[e])||void 0===r?void 0:r.filter((function(e){return"parent"===e.type})).length:0,c=g.parents?s:s-a;return y.nodeColorScheme[(i=c,o=0,l=y.nodeColorScheme.length-1,Math.min(Math.max(i,o),l))]},ge=function(e,n){return h[e]>h[n]?he(e):he(n)},fe=function(e,n){return"rgba("+(e=e.replace("#","")).match(new RegExp("(.{"+e.length/3+"})","g")).map((function(n){return parseInt(e.length%2?n+n:n,16)})).concat(isFinite(n)?n:1).join(",")+")"},xe=(0,u.useMemo)((function(){return ce(y.labelTextColor)}),[y.labelTextColor,B]),pe=(0,u.useMemo)((function(){return ce(y.labelBackgroundColor)}),[y.labelBackgroundColor,B]),je=function(e){var n,t=null!==(n=h[e.id])&&void 0!==n?n:[],r=t.length?t.filter((function(e){return"parent"===e.type})).length:0,i=3+t.length*y.nodeSizeLinks-(g.parents?0:r);return 1===y.highlightNodeSize?i:i*(_[e.id]||de[e.id]?1+J*(y.highlightNodeSize-1):1)},me=(0,u.useState)(!1),ve=me[0],be=me[1],ke=(0,b.q)(),we=ke.isOpen,Ne=ke.onOpen,De=ke.onClose,Re=(0,u.useState)(null),Te=Re[0],Fe=Re[1],Pe=(0,u.useState)([0,0]),Ze=Pe[0],He=Pe[1],Be={graphData:q,width:R,height:T,backgroundColor:H.colors.gray[y.backgroundColor],nodeLabel:function(e){return e.title},nodeColor:function(e){return function(e){_.length;var n=_[e.id]||de[e.id];if(y.emacsNodeColor&&e.id===f)return ce(y.emacsNodeColor);if(N&&e.tags.some((function(e){return N[e]}))){var t=N[e.tags.filter((function(e){return N[e]}))[0]];return ue[t][y.backgroundColor](y.highlightFade*J)}return y.citeNodeColor&&e.properties.ROAM_REFS&&e.properties.FILELESS?n?ce(y.citeNodeColor):ue[y.citeNodeColor][y.backgroundColor](y.highlightFade*J):y.refNodeColor&&e.properties.ROAM_REFS?n?ce(y.refNodeColor):ue[y.refNodeColor][y.backgroundColor](y.highlightFade*J):n?y.nodeHighlight?ue[he(e.id)][y.nodeHighlight](J):ce(he(e.id)):ue[he(e.id)][y.backgroundColor](y.highlightFade*J)}(e)},nodeRelSize:y.nodeRel,nodeVal:function(e){return je(e)},nodeCanvasObject:function(e,n,t){if(e&&!ve&&y.labels){var r=de[e.id];if(!(t<=y.labelScale||1===y.labels)||_[e.id]||r){var i=e.title,o=i.length>y.labelLength?i.substring(0,y.labelLength)+"...":i,l=y.labelFontSize/(.75*Math.min(Math.max(.5,t),3)),a=[1.1*n.measureText(o).width,l].map((function(e){return e+.5*l})),c=Math.min(3*(t-y.labelScale)/y.labelScale,1),u=function(){return 1===y.labels||t<=y.labelScale?J:_[e.id]||de[e.id]?Math.max(c,J):1*c*(-1*(y.highlightFade*J-1))},d=8*Math.cbrt(je(e)*y.nodeRel);if(y.labelBackgroundColor&&y.labelBackgroundOpacity){var h=u()*y.labelBackgroundOpacity,g=fe(pe,h);n.fillStyle=g,n.fillRect.apply(n,[e.x-a[0]/2,e.y-a[1]/2+d].concat((0,s.Z)(a)))}var f=u();n.textAlign="center",n.textBaseline="middle";var x=fe(xe,f);n.fillStyle=x,n.font="".concat(l,"px Sans-Serif"),n.fillText(o,e.x,e.y+d)}}},nodeCanvasObjectMode:function(){return"after"},linkDirectionalParticles:y.particles?y.particlesNumber:void 0,linkDirectionalArrowLength:y.arrows?y.arrowsLength:void 0,linkDirectionalArrowRelPos:y.arrowsPos,linkDirectionalArrowColor:y.arrowsColor?function(e){return ce(y.arrowsColor)}:void 0,linkColor:function(e){var n="object"===typeof e.source?e.source.id:e.source,t="object"===typeof e.target?e.target.id:e.target,r=Ee(e,X.current),i=Ee(e,ae.current),o=r||i,l=e;return y.refLinkColor&&"ref"===l.type?o&&(y.refLinkHighlightColor||y.linkHighlight)?ue[y.refLinkColor][y.refLinkHighlightColor||y.linkHighlight](J):ue[y.refLinkColor][y.backgroundColor](y.highlightFade*J):y.citeLinkColor&&"cite"===l.type?o&&(y.citeLinkHighlightColor||y.linkHighlight)?ue[y.citeLinkColor][y.citeLinkHighlightColor||y.linkHighlight](J):ue[y.citeLinkColor][y.backgroundColor](y.highlightFade*J):function(e,n,t){if(!y.linkHighlight&&!y.linkColorScheme&&!t){var r=ge(e,n);return ce(r)}if(!t&&!y.linkColorScheme){var i=ge(e,n);return ue[i][y.backgroundColor](y.highlightFade*J)}if(!t)return ue[y.linkColorScheme][y.backgroundColor](y.highlightFade*J);if(!y.linkHighlight&&!y.linkColorScheme){var o=ge(e,n);return ce(o)}return y.linkHighlight?y.linkColorScheme?ue[y.linkColorScheme][y.linkHighlight](J):ue[ge(e,n)][y.linkHighlight](J):ce(y.linkColorScheme)}(n,t,o)},linkWidth:function(e){if(1===y.highlightLinkSize)return y.linkWidth;var n=Ee(e,X.current),t=Ee(e,ae.current);return n||t?y.linkWidth*(1+J*(y.highlightLinkSize-1)):y.linkWidth},linkDirectionalParticleWidth:y.particlesWidth,d3AlphaDecay:t.alphaDecay,d3AlphaMin:t.alphaMin,d3VelocityDecay:t.velocityDecay,onNodeClick:function(e,n){var t=e;De();var r=n.timeStamp-Q.current<400;return Q.current=n.timeStamp,W(r?"double":"click",t)},onBackgroundClick:function(){De(),Z(null),0!==S.nodeIds.length&&O((function(e){return Se(Se({},e),{},{nodeIds:[]})}))},onNodeHover:function(e){y.highlight&&(P||(se(),Y(0)),Z(e))},onNodeRightClick:function(e,n){!function(e,n){He([n.pageX,n.pageY]),Fe(e),Ne()}(e,n)},onNodeDrag:function(e){De(),Z(e),be(!0)},onNodeDragEnd:function(e){Z(null),be(!1)}};return(0,l.jsxs)(v.xu,{overflow:"hidden",children:[we&&(0,l.jsx)(Ce,{scope:S,node:Te,nodeType:null===Te||void 0===Te?void 0:Te.id,background:!1,coordinates:Ze,handleLocal:A,menuClose:De,openNodeInEmacs:M,deleteNodeInEmacs:function(e){0===e.level&&V("delete",{id:e.id,file:e.file})},createNodeInEmacs:function(e){V("create",{id:e.id,title:e.title,ref:e.properties.ROAM_REFS})}}),d?(0,l.jsx)(Ie,Se(Se({ref:n},Be),{},{nodeThreeObjectExtend:!0,backgroundColor:H.colors.white,nodeOpacity:y.nodeOpacity,nodeResolution:y.nodeResolution,linkOpacity:y.linkOpacity,nodeThreeObject:function(e){if(y.labels&&(!(y.labels<3)||_[e.id])){var n=new ye.Z(e.title.substring(0,40));return n.color=ce(y.labelTextColor),n.backgroundColor=ce(y.labelBackgroundColor),n.padding=2,n.textHeight=8,n}}})):(0,l.jsx)(Le,Se(Se({ref:n},Be),{},{linkLineDash:function(e){var n=e;return y.citeDashes&&"cite"===n.type?[y.citeDashLength,y.citeGapLength]:y.refDashes&&"ref"==n.type?[y.refDashLength,y.refGapLength]:null}}))]})}));function Ee(e,n){var t,r;return(null===(t=e.source)||void 0===t?void 0:t.id)===(null===n||void 0===n?void 0:n.id)||(null===(r=e.target)||void 0===r?void 0:r.id)===(null===n||void 0===n?void 0:n.id)}},45301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(96834)}])}},function(e){e.O(0,[774,737,446,238,888,179],(function(){return n=45301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);